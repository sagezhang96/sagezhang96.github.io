<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Sage自留地😎</title>
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Sage自留地😎" type="application/atom+xml">
</head>
<body>
    <div class="container">
        <header class="header">
    <div class="site-title">
        <a href="/">Sage自留地😎</a>
    </div>
    <div class="nav-toggle">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <nav class="nav">
        <ul class="nav-list">
            
                
                    <li class="nav-item">
                        <a href="/">首页</a>
                    </li>
                
            
                
                    <li class="nav-item has-children">
                        <a href="javascript:void(0);">文章</a>
                        <ul class="nav-submenu">
                            
                                <li class="nav-submenu-item">
                                    <a href="/archives">归档</a>
                                </li>
                            
                                <li class="nav-submenu-item">
                                    <a href="/categories">分类</a>
                                </li>
                            
                                <li class="nav-submenu-item">
                                    <a href="/tags">标签</a>
                                </li>
                            
                        </ul>
                    </li>
                
            
                
                    <li class="nav-item">
                        <a href="/about">关于</a>
                    </li>
                
            
        </ul>
    </nav>
</header>

        <div class="main-container">
            <main class="main-content">
                <div class="main-content">
    <article class="post-detail">
        <header class="post-header">
            <h1 class="post-title">【Hacking With Swift】Project9_Navigation</h1>
            <div class="post-meta">
                <span class="post-date">
                    2024-06-26
                </span>
                
                    <span class="post-category">
                        <a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>
                    </span>
                
                
                    <span class="post-tags">
                        <a class="tag-none-link" href="/tags/Hacking-with-Swift/" rel="tag">Hacking with Swift</a> <a class="tag-none-link" href="/tags/Swift/" rel="tag">Swift</a> <a class="tag-none-link" href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag">编程</a>
                    </span>
                
            </div>
        </header>

        <div class="post-content">
            <p><em><strong><font color=red>英文原博博主是</font></strong></em>   <a target="_blank" rel="noopener" href="https://www.youtube.com/c/PaulHudson">Paul Hudson</a>    <i aria-hidden="true" class="fab fa-twitter" style="color: #4099ff"></i> <a href="https://twitter.com/twostraws" target="_blank">@twostraws</a></p>
<p><em><strong><font color=red>本文是学习Swift过程中翻译该网站的内容:</font></strong></em>   <a target="_blank" rel="noopener" href="https://www.hackingwithswift.com/">https://www.hackingwithswift.com/</a></p>
<p>今天启动另一个新技术项目，我们将重点关注导航。这是我们在上一个项目中简单触及的 SwiftUI 领域，但它确实是您将构建的几乎每个应用程序的核心。</p>
<p>正如您将看到的，导航实际上分为两种主要类型：由用户交互驱动的导航和您自己触发的编程导航。两者都很重要，您会发现自己可以自由地混合两者。</p>
<h2 id="导航：简介"><a href="#导航：简介" class="headerlink" title="导航：简介"></a>导航：简介</h2><p>在这个技术项目中，我们将仔细研究 SwiftUI 中的导航 - 我们如何使用 NavigationStack 从一个屏幕移动到另一个屏幕，这既是因为用户要求这样做，也是因为我们想要这样做在特定时间自动。</p>
<p>介绍完这些基础知识后，我们将了解更高级的导航，包括处理状态恢复 - 准确记住用户导航到的位置，以便当您的应用将来启动时，他们可以从上次中断的地方继续。</p>
<p>完成后，我们将查看一些自定义选项：更改导航栏的外观、将按钮放置在正确的位置，甚至如何让用户根据需要更改导航标题。</p>
<p>需要填充的内容有很多，但到最后，您将对 SwiftUI 中的导航工作原理有更深入的了解，这样您就可以在所有应用程序中真正充分利用它。</p>
<p>请创建一个名为“导航”的新应用程序项目，让我们开始吧……</p>
<h2 id="简单的NavigationLink的问题"><a href="#简单的NavigationLink的问题" class="headerlink" title="简单的NavigationLink的问题"></a>简单的NavigationLink的问题</h2><p>如果你使用这样的代码创建详细视图，你会发现有一些问题</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">DetailView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> number: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Detail View <span class="subst">\(number)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">number</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.number <span class="operator">=</span> number</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Creating detail view <span class="subst">\(number)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">NavigationStack</span> &#123;</span><br><span class="line">    <span class="type">List</span>(<span class="number">0</span><span class="operator">..&lt;</span><span class="number">1000</span>) &#123; i <span class="keyword">in</span></span><br><span class="line">        <span class="type">NavigationLink</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">            <span class="type">DetailView</span>(number: i)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>你会发现，现在，当您滚动时，您会看到许多 DetailView 实例正在创建，而且通常不止一次。</p>
<p>也就是说，你还没点进去视图呢，视图就已经被创建了。</p>
<p>这使得 Swift 和 SwiftUI 做了比必要的更多的工作，因此当您处理动态数据时 – 例如，当您有许多不同的整数以相同的方式显示时 – SwiftUI 为我们提供了更好的解决方案：附加我们的导航链接的呈现值。</p>
<h2 id="使用-navigationDestination-以智能方式处理导航"><a href="#使用-navigationDestination-以智能方式处理导航" class="headerlink" title="使用 navigationDestination() 以智能方式处理导航"></a>使用 navigationDestination() 以智能方式处理导航</h2><p>对于一个简单的导航形式，如下所示</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationStack</span> &#123;</span><br><span class="line">    <span class="type">NavigationLink</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Detail View&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但对于更高级的导航，最好将目的地与值分开。这允许 SwiftUI 仅在需要时加载目标。</p>
<p>执行此操作需要两个步骤：</p>
<ol>
<li><p>我们为 NavigationLink 附加一个值。该值可以是您想要的任何值 - 字符串、整数、自定义结构实例或其他任何值。但是，有一个要求：无论您使用什么类型，都必须符合名为 Hashable 的协议。</p>
</li>
<li><p>在导航堆栈中附加一个 navigationDestination() 修饰符，告诉它收到数据后要做什么。</p>
</li>
</ol>
<p>这两个都是新的只是，但一开始你可以忽略 Hashable 要求，因为大多数 Swift 的内置类型已经符合 Hashable 。例如， Int 、 String 、 Date 、 URL 、数组和字典已经符合 Hashable ，所以你不需要担心他们。</p>
<p>因此，让我们首先看一下 navigationDestination() 修饰符，然后再回头更详细地看一下 Hashable 。</p>
<p>首先，我们可以创建一个由 100 个数字组成的 List ，每个数字都附加到一个导航链接作为其表示值 - 我们告诉 SwiftUI 我们想要导航到一个数字。看起来是这样的：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationStack</span> &#123;</span><br><span class="line">    <span class="type">List</span>(<span class="number">0</span><span class="operator">..&lt;</span><span class="number">100</span>) &#123; i <span class="keyword">in</span></span><br><span class="line">        <span class="type">NavigationLink</span>(<span class="string">&quot;Select <span class="subst">\(i)</span>&quot;</span>, value: i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在，该代码还不够。是的，我们已经告诉 SwiftUI 我们希望在点击“Select 0”时导航到 0，但我们还没有说明如何显示该数据。它应该是一些文本、带有一些图片的 VStack 、自定义 SwiftUI 视图还是完全其他的东西？</p>
<p>这就是 navigationDestination() 修饰符的用武之地：我们可以告诉它“当你被要求导航到一个整数时，这是你应该做的……”</p>
<p>将您的代码修改为：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationStack</span> &#123;</span><br><span class="line">    <span class="type">List</span>(<span class="number">0</span><span class="operator">..&lt;</span><span class="number">100</span>) &#123; i <span class="keyword">in</span></span><br><span class="line">        <span class="type">NavigationLink</span>(<span class="string">&quot;Select <span class="subst">\(i)</span>&quot;</span>, value: i)</span><br><span class="line">    &#125;</span><br><span class="line">    .navigationDestination(for: <span class="type">Int</span>.<span class="keyword">self</span>) &#123; selection <span class="keyword">in</span></span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;You selected <span class="subst">\(selection)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因此，当 SwiftUI 尝试导航到任何 Int 值时，它会在 selection 常量中为我们提供该值，并且我们需要返回正确的 SwiftUI 视图来显示它。</p>
<p>提示：如果您有多种不同类型的数据要导航到它们，只需添加几个 navigationDestination() 修饰符即可。实际上，您是在说，“当您想要导航到整数时执行此操作，但当您想导航到字符串时执行此操作。”</p>
<p>这对于大量数据非常有效，例如导航到字符串、整数和 UUID。但对于更复杂的数据（例如自定义结构），我们需要使用哈希。</p>
<p>Swift 在内部大量使用 Hashable 。例如，当您使用 Set 而不是数组时，您放入其中的所有内容都必须符合 Hashable 协议。这就是集合比数组更快的原因：当您说“集合是否包含这个特定对象？”时Swift 将计算对象的哈希值，然后在集合中搜索该哈希值，而不是尝试将每个属性与每个对象进行比较。</p>
<p>如果这一切听起来很复杂，请记住 Swift 的大多数内置类型已经符合 Hashable 。如果您创建一个具有全部符合 Hashable 属性的自定义结构，则只需进行一个微小的更改即可使整个结构符合 Hashable 。</p>
<p>例如，此结构包含一个 UUID、一个字符串和一个整数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> id <span class="operator">=</span> <span class="type">UUID</span>()</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>如果我们想让该结构符合 Hashable ，我们只需添加如下协议：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span>: <span class="title class_">Hashable</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> id <span class="operator">=</span> <span class="type">UUID</span>()</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在我们的 Student 结构符合 Hashable 它可以与 NavigationLink 和 navigationDestination() 一起使用，就像整数或字符串一样</p>
<h2 id="使用-NavigationStack-进行编程导航"><a href="#使用-NavigationStack-进行编程导航" class="headerlink" title="使用 NavigationStack 进行编程导航"></a>使用 NavigationStack 进行编程导航</h2><p>我们可以通过设定一个路径，来控制从一个视图移动到另一个视图，像这样</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> path <span class="operator">=</span> [<span class="type">Int</span>]()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationStack</span>(path: <span class="variable">$path</span>) &#123;</span><br><span class="line">            <span class="type">VStack</span> &#123;</span><br><span class="line">                <span class="comment">// more code to come</span></span><br><span class="line">            &#125;</span><br><span class="line">            .navigationDestination(for: <span class="type">Int</span>.<span class="keyword">self</span>) &#123; selection <span class="keyword">in</span></span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;You selected <span class="subst">\(selection)</span>&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这做了两件重要的事情：</p>
<ol>
<li><p>它创建一个 @State 属性来存储整数数组。</p>
</li>
<li><p>它将该属性绑定到 NavigationStack 的 path ，这意味着更改数组将自动导航到数组中的任何内容，而且当用户按 Back 时也会更改数组导航栏。</p>
</li>
</ol>
<p>因此，我们可以通过按钮向路径中加入数字</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(<span class="string">&quot;Show 32&quot;</span>) &#123;</span><br><span class="line">    path <span class="operator">=</span> [<span class="number">32</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Button</span>(<span class="string">&quot;Show 64&quot;</span>) &#123;</span><br><span class="line">    path.append(<span class="number">64</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在第一个按钮中，我们设置整个数组，使其仅包含数字 32。如果数组中发生其他任何内容，它将被删除，这意味着 NavigationStack 将返回到其原始状态在导航到数字 32 之前。</p>
<p>在第二个按钮中，我们附加 64，这意味着它将添加到我们导航到的任何内容中。因此，如果我们的数组已经包含 32，那么我们现在在堆栈中将拥有三个视图：原始视图（称为“根”视图），然后是显示数字 32 的视图，最后是显示数字 64 的视图。</p>
<p>您还可以同时推送多个值，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(<span class="string">&quot;Show 32 then 64&quot;</span>) &#123;</span><br><span class="line">    path <span class="operator">=</span> [<span class="number">32</span>, <span class="number">64</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这将显示 32 的视图，然后显示 64 的视图，因此用户需要点击“返回”两次才能返回到根视图。</p>
<p>您可以根据需要混合用户导航和编程导航 - SwiftUI 将负责确保您的 path 数组与您显示的任何数据保持同步，无论其显示方式如何。</p>
<h2 id="使用-NavigationPath-导航到不同的数据类型"><a href="#使用-NavigationPath-导航到不同的数据类型" class="headerlink" title="使用 NavigationPath 导航到不同的数据类型"></a>使用 NavigationPath 导航到不同的数据类型</h2><p>导航到不同的数据类型采用两种形式之一。最简单的是当您将 navigationDestination() 与不同的数据类型一起使用时，但您没有跟踪显示的确切路径，因为这里的事情很简单：只需多次添加 navigationDestination() ，对于您想要的每种数据类型一次。</p>
<p>例如，我们可以显示五个数字和五个字符串，并以不同的方式导航到它们：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationStack</span> &#123;</span><br><span class="line">    <span class="type">List</span> &#123;</span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span><span class="number">5</span>) &#123; i <span class="keyword">in</span></span><br><span class="line">            <span class="type">NavigationLink</span>(<span class="string">&quot;Select Number: <span class="subst">\(i)</span>&quot;</span>, value: i)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span><span class="number">5</span>) &#123; i <span class="keyword">in</span></span><br><span class="line">            <span class="type">NavigationLink</span>(<span class="string">&quot;Select String: <span class="subst">\(i)</span>&quot;</span>, value: <span class="type">String</span>(i))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .navigationDestination(for: <span class="type">Int</span>.<span class="keyword">self</span>) &#123; selection <span class="keyword">in</span></span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;You selected the number <span class="subst">\(selection)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .navigationDestination(for: <span class="type">String</span>.<span class="keyword">self</span>) &#123; selection <span class="keyword">in</span></span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;You selected the string <span class="subst">\(selection)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是，当您想要添加编程导航时，事情会变得更加复杂，因为您需要能够将一些数据绑定到导航堆栈的路径。之前我向您展示了如何使用整数数组执行此操作，但现在我们可能有整数或字符串，因此我们不能再使用简单的数组。</p>
<p>因为一个数组只能包含一种固定的数据类型，所以SwiftUI 的解决方案是一种名为 NavigationPath 的特殊类型，它能够在单个路径中保存多种数据类型。实际上，它的工作方式与数组非常相似——我们可以使用它创建一个属性，并绑定到<code>NavigationStack </code>如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> path <span class="operator">=</span> <span class="type">NavigationPath</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">NavigationStack</span>(path: <span class="variable">$path</span>) &#123;</span><br></pre></td></tr></table></figure>

<p>然后以编程方式将内容推送到它，例如使用工具栏按钮：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.toolbar &#123;</span><br><span class="line">    <span class="type">Button</span>(<span class="string">&quot;Push 556&quot;</span>) &#123;</span><br><span class="line">        path.append(<span class="number">556</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">Button</span>(<span class="string">&quot;Push Hello&quot;</span>) &#123;</span><br><span class="line">        path.append(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果您想感觉更奇特， NavigationPath 就是我们所说的类型擦除器 - 它存储任何类型的 Hashable 数据，而不暴露每个项目的数据类型。</p>
<h2 id="如何以编程方式使-NavigationStack-返回其根视图"><a href="#如何以编程方式使-NavigationStack-返回其根视图" class="headerlink" title="如何以编程方式使 NavigationStack 返回其根视图"></a>如何以编程方式使 NavigationStack 返回其根视图</h2><p>通常在 NavigationStack 中深入几个级别，然后决定要返回到开头。例如，也许您的用户正在下订单，并通过显示购物篮的屏幕进行操作，询问运输详细信息，询问付款详细信息，然后确认订单，但是当他们完成后，您想返回到最开始的界面。开始 – 返回 NavigationStack 的根视图。</p>
<p>为了证明这一点，我们可以创建一个小沙箱，它可以通过每次生成新的随机数来不断地推送新视图。</p>
<p>首先，这是我们的 DetailView ，它将当前数字显示为标题，并有一个按钮，只要按下它就会推送到新的随机数字：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">DetailView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> number: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationLink</span>(<span class="string">&quot;Go to Random Number&quot;</span>, value: <span class="type">Int</span>.random(in: <span class="number">1</span><span class="operator">...</span><span class="number">1000</span>))</span><br><span class="line">            .navigationTitle(<span class="string">&quot;Number: <span class="subst">\(number)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在我们可以从 ContentView 中呈现它，从初始值 0 开始，但每次显示新整数时导航到新的 DetailView ：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> path <span class="operator">=</span> [<span class="type">Int</span>]()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationStack</span>(path: <span class="variable">$path</span>) &#123;</span><br><span class="line">            <span class="type">DetailView</span>(number: <span class="number">0</span>)</span><br><span class="line">                .navigationDestination(for: <span class="type">Int</span>.<span class="keyword">self</span>) &#123; i <span class="keyword">in</span></span><br><span class="line">                    <span class="type">DetailView</span>(number: i)</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果是这样的：<br><img src="https://sageimg.oss-cn-shenzhen.aliyuncs.com/image/navigationrandom.gif"></p>
<p>现在，如果您深入其中 10 次查看并决定回家，您有两个选择：</p>
<ol>
<li>如果您使用简单的数组作为路径，就像我们在上面的代码中所做的那样，您可以在该数组上调用 removeAll() 来删除路径中的所有内容，然后返回到根视图。</li>
<li>如果您使用 NavigationPath 作为路径，则可以将其设置为 NavigationPath 的新空实例，如下所示： path &#x3D; NavigationPath() 。</li>
</ol>
<p>但是，还有一个更大的问题：当您无权访问原始 path 属性时，如何从子视图中执行此操作？</p>
<p>这里有两个选择：要么将路径存储在使用 @Observable 的外部类中，要么引入一个名为 @Binding 的新属性包装器。我之前已经演示过 @Observable ，所以我们在这里重点关注 @Binding 。</p>
<p>您已经了解了 @State 如何让我们在视图中创建一些存储，以便我们可以在应用程序运行时修改值。 @Binding 属性包装器允许我们将 @State 属性传递到另一个视图并从那里修改它 - 我们可以在多个地方共享 @State 属性，并更改它在一个地方会改变它在任何地方。</p>
<p>在我们当前的代码中，这意味着向 DetailView 添加一个新属性以访问导航路径数组：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Binding</span> <span class="keyword">var</span> path: [<span class="type">Int</span>]</span><br></pre></td></tr></table></figure>

<p>现在我们需要从 ContentView 中使用 DetailView 的两个地方传递它，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DetailView</span>(number: <span class="number">0</span>, path: <span class="variable">$path</span>)</span><br><span class="line">    .navigationDestination(for: <span class="type">Int</span>.<span class="keyword">self</span>) &#123; i <span class="keyword">in</span></span><br><span class="line">        <span class="type">DetailView</span>(number: i, path: <span class="variable">$path</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>正如您所看到的，我们传入 $path 是因为我们想要传入绑定 - 我们希望 DetailView 能够读取和写入路径。</p>
<p>现在我们可以向 DetailView 添加一个工具栏来操作路径数组：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.toolbar &#123;</span><br><span class="line">    <span class="type">Button</span>(<span class="string">&quot;Home&quot;</span>) &#123;</span><br><span class="line">        path.removeAll()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果你使用 NavigationPath 你会使用这个：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.toolbar &#123;</span><br><span class="line">    <span class="type">Button</span>(<span class="string">&quot;Home&quot;</span>) &#123;</span><br><span class="line">        path <span class="operator">=</span> <span class="type">NavigationPath</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>像这样共享绑定很常见 - 这正是 TextField 、 Stepper 和其他控件的工作方式。事实上，当我们创建自己的自定义组件时，我们将在项目 11 中再次查看 @Binding ，因为它确实很有帮助。</p>
<p>在运行过程中，我发现虽然第三个第四个以及之后所有的都是随机的数字，但number0的下一个视图，也就是第二个视图都是一个固定数字，而我在代码里已经用random来生成视图了，这是为什么？</p>
<p>这个问题出现的原因是因为 NavigationLink 创建的目标视图在初次加载时就已经决定了，不会在每次点击时重新计算随机数。因此，第一个 NavigationLink 生成的随机数在应用启动时就已经固定下来。</p>
<p>如果想要每次都是随机的，可以这样修改 </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">DetailView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> number: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Binding</span> <span class="keyword">var</span> path: [<span class="type">Int</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Button</span>(action: &#123;</span><br><span class="line">                <span class="keyword">let</span> randomNumber <span class="operator">=</span> <span class="type">Int</span>.random(in: <span class="number">1</span><span class="operator">...</span><span class="number">1000</span>)</span><br><span class="line">                path.append(randomNumber)</span><br><span class="line">            &#125;) &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;Go to Random Number&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .navigationTitle(<span class="string">&quot;Number: <span class="subst">\(number)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="如何使用-Codable-保存-NavigationStack-路径"><a href="#如何使用-Codable-保存-NavigationStack-路径" class="headerlink" title="如何使用 Codable 保存 NavigationStack 路径"></a>如何使用 Codable 保存 NavigationStack 路径</h2><p>您可以通过以下两种方式之一使用 Codable 保存和加载导航堆栈路径，具体取决于您拥有的路径类型：</p>
<ol>
<li>如果您使用 NavigationPath 来存储 NavigationStack 的活动路径，SwiftUI 会提供两个帮助器来更轻松地保存和加载路径。</li>
<li>如果您使用同质数组 – 例如 [Int] 或 [String] – 那么你不需要这些助手，你可以自由地加载或保存你的数据。</li>
</ol>
<p>这些技术非常相似，因此我将在这里介绍它们。</p>
<p>两者都依赖于将路径存储在视图之外，因此路径数据的所有加载和保存都是在不可见的情况下发生的 - 外部类会自动处理它。更准确地说，每当我们的路径数据发生变化时——无论是整数或字符串数​​组，还是 NavigationPath 对象——我们都需要保存新路径，以便将来保留它，并且我们将当类初始化时，还会从磁盘加载该数据。</p>
<p>当我们的路径数据存储为整数数组时，该类的外观如下：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Observable</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PathStore</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> path: [<span class="type">Int</span>] &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            save()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> savePath <span class="operator">=</span> <span class="type">URL</span>.documentsDirectory.appending(path: <span class="string">&quot;SavedPath&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> data <span class="operator">=</span> <span class="keyword">try?</span> <span class="type">Data</span>(contentsOf: savePath) &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> decoded <span class="operator">=</span> <span class="keyword">try?</span> <span class="type">JSONDecoder</span>().decode([<span class="type">Int</span>].<span class="keyword">self</span>, from: data) &#123;</span><br><span class="line">                path <span class="operator">=</span> decoded</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Still here? Start with an empty path.</span></span><br><span class="line">        path <span class="operator">=</span> []</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">save</span>() &#123;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> data <span class="operator">=</span> <span class="keyword">try</span> <span class="type">JSONEncoder</span>().encode(path)</span><br><span class="line">            <span class="keyword">try</span> data.write(to: savePath)</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Failed to save navigation data&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果您使用 NavigationPath ，则只需进行四个小更改。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path: <span class="type">NavigationPath</span> &#123;</span><br><span class="line">    <span class="keyword">didSet</span> &#123;</span><br><span class="line">        save()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************/</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> decoded <span class="operator">=</span> <span class="keyword">try?</span> <span class="type">JSONDecoder</span>().decode(<span class="type">NavigationPath</span>.<span class="type">CodableRepresentation</span>.<span class="keyword">self</span>, from: data) &#123;</span><br><span class="line">    path <span class="operator">=</span> <span class="type">NavigationPath</span>(decoded)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************/</span></span><br><span class="line">path <span class="operator">=</span> <span class="type">NavigationPath</span>()</span><br><span class="line"><span class="comment">/*******************************/</span></span><br><span class="line"><span class="comment">/**在 save() 方法的开头添加一个检查，该方法尝试检索 Codable 导航路径，如果我们没有得到任何返回，则立即退出：**/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">guard</span> <span class="keyword">let</span> representation <span class="operator">=</span> path.codable <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"><span class="keyword">let</span> data <span class="operator">=</span> <span class="keyword">try</span> <span class="type">JSONEncoder</span>().encode(representation)</span><br></pre></td></tr></table></figure>
<p>现在您可以继续正常编写 SwiftUI 代码，确保将 NavigationStack 的路径绑定到 PathStore 实例的 path 属性。例如，这可以让您显示附加随机整数的视图 - 您可以推送任意数量的视图，然后安静并重新启动应用程序以使其完全恢复为您离开时的状态：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">DetailView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> number: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationLink</span>(<span class="string">&quot;Go to Random Number&quot;</span>, value: <span class="type">Int</span>.random(in: <span class="number">1</span><span class="operator">...</span><span class="number">1000</span>))</span><br><span class="line">            .navigationTitle(<span class="string">&quot;Number: <span class="subst">\(number)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> pathStore <span class="operator">=</span> <span class="type">PathStore</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationStack</span>(path: <span class="variable">$pathStore</span>.path) &#123;</span><br><span class="line">            <span class="type">DetailView</span>(number: <span class="number">0</span>)</span><br><span class="line">                .navigationDestination(for: <span class="type">Int</span>.<span class="keyword">self</span>) &#123; i <span class="keyword">in</span></span><br><span class="line">                    <span class="type">DetailView</span>(number: i)</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="自定义导航栏外观"><a href="#自定义导航栏外观" class="headerlink" title="自定义导航栏外观"></a>自定义导航栏外观</h2><p>iOS 喜欢它的导航栏看起来非常特别，但我们对其样式的控制确实有限。</p>
<p>首先，您已经了解了如何使用大型或内联导航标题样式，从而在顶部提供大型或小型文本。因此，这将在顶部使用一个小标题：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationStack</span> &#123;</span><br><span class="line">    <span class="type">List</span>(<span class="number">0</span><span class="operator">..&lt;</span><span class="number">100</span>) &#123; i <span class="keyword">in</span></span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Row <span class="subst">\(i)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .navigationTitle(<span class="string">&quot;Title goes here&quot;</span>)</span><br><span class="line">    .navigationBarTitleDisplayMode(.inline)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>您会看到顶部的导航栏默认情况下是不可见的，但只要向上滚动一点，它就会变成纯灰色背景，以便其标题从列表的内容中清晰地突出。</p>
<p>SwiftUI 让我们可以稍微自定义一下：我们可以指定用于该背景的替代颜色。请记住，只有当列表在导航栏下方滚动时，此信息才可见，因此您一开始不会看到它。</p>
<p>要尝试一下，请在 navigationBarTitleDisplayMode() 下面添加以下内容：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.toolbarBackground(.blue)</span><br></pre></td></tr></table></figure>
<p>效果如图<br><img src="https://sageimg.oss-cn-shenzhen.aliyuncs.com/image/1.gif"></p>
<p>当您运行应用程序并稍微滚动时，您会看到导航栏变成纯蓝色。您还会发现标题可能难以阅读，因为在浅色模式下它会是黑色文本。您可以通过在前一个修饰符下方添加另一个修饰符来解决此问题，强制导航栏始终使用深色模式，这又意味着标题文本将为白色：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.toolbarColorScheme(.dark)</span><br></pre></td></tr></table></figure>

<p>提示：稍后您将遇到其他类型的工具栏。这两个修饰符会影响所有栏，但如果您只想修改导航栏，则应将 for: .navigationBar 作为第二个参数添加到它们中。</p>
<p>自定义导航栏还有最后一种方法：您可以始终隐藏它或根据应用程序中的当前状态隐藏它。</p>
<p>为此，请将 toolbar() 修饰符设置为 .hidden ，对于所有栏或仅导航栏：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.toolbar(.hidden, for: .navigationBar)</span><br></pre></td></tr></table></figure>
<p>隐藏工具栏不会阻止您导航到新视图，但可能会导致滚动视图位于时钟等系统信息下 - 请小心！<br><img src="https://sageimg.oss-cn-shenzhen.aliyuncs.com/image/20240702113522.png"></p>
<h2 id="将工具栏按钮放置在某个特定位置"><a href="#将工具栏按钮放置在某个特定位置" class="headerlink" title="将工具栏按钮放置在某个特定位置"></a>将工具栏按钮放置在某个特定位置</h2><p>如果您将按钮放置在 NavigationStack 工具栏中，SwiftUI 将根据您的代码运行的平台自动放置它们。我们在这里构建 iOS 应用程序，这意味着我们的按钮将放置在导航栏的右侧，并且使用从左到右阅读的语言（例如英语）。</p>
<p>如果需要，您可以使用 ToolbarItem 进行自定义。它围绕着您的工具栏按钮，允许您通过从多个选项之一中进行选择，将它们准确地放置在您想要的位置。</p>
<p>例如，我们可以要求像这样的左侧放置：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationStack</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">    .toolbar &#123;</span><br><span class="line">        <span class="type">ToolbarItem</span>(placement: .topBarLeading) &#123;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">                <span class="comment">// button action here</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>尽管这种方法效果很好，但通常最好使用语义选项之一 - 具有特定含义的放置，而不是仅仅依赖于它们的位置。这些包括：</p>
<ol>
<li><p><code>.confirmationAction </code> ，当您希望用户同意某件事时，例如同意服务条款。</p>
</li>
<li><p><code>.destructiveAction </code> ，当用户需要选择销毁他们正在使用的任何内容时，例如确认他们想要删除他们创建的一些数据。</p>
</li>
<li><p><code>.cancellationAction</code>，当用户需要撤销他们所做的更改时，例如放弃他们所做的更改。</p>
</li>
<li><p><code>.navigation </code> ，用于使用户在数据之间移动的按钮，例如在 Web 浏览器中后退和前进。</p>
</li>
</ol>
<p>这些语义布局有两个重要的好处。首先，由于 iOS 拥有有关按钮功能的额外信息，因此它可以添加额外的样式 - 例如，确认按钮可以以粗体呈现。其次，这些位置会自动适应其他平台，因此您的按钮将始终显示在 iOS、macOS、watchOS 等平台上的正确位置。</p>
<p>提示：如果您需要用户决定保存更改还是放弃更改，您可能需要添加 navigationBarBackButtonHidden() 修饰符，以便他们在没有做出选择的情况下无法点击“返回”退出。</p>
<p>如果您希望多个按钮使用相同的位置，您可以像这样重复 ToolbarItem ：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.toolbar &#123;</span><br><span class="line">    <span class="type">ToolbarItem</span>(placement: .topBarLeading) &#123;</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">// button action here</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">ToolbarItem</span>(placement: .topBarLeading) &#123;</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;Or Tap Me&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">// button action here</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者您可以使用 ToolbarItemGroup ，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.toolbar &#123;</span><br><span class="line">    <span class="type">ToolbarItemGroup</span>(placement: .topBarLeading) &#123;</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">// button action here</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;Tap Me 2&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">// button action here</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://sageimg.oss-cn-shenzhen.aliyuncs.com/image/20240702114020.png"></p>
<h2 id="使您的导航标题可编辑"><a href="#使您的导航标题可编辑" class="headerlink" title="使您的导航标题可编辑"></a>使您的导航标题可编辑</h2><p>基本的 navigationTitle() 修饰符让我们在导航栏中显示一个字符串，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">                .navigationTitle(<span class="string">&quot;SwiftUI&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但如果您使用 .inline 标题显示模式，您还可以将绑定传递给 navigationTitle() 。然后，这将像往常一样显示，但有一个重要的补充：iOS 将在您的标题旁边显示一个小箭头，显示一个“重命名”按钮来更改标题。代码如下：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> title <span class="operator">=</span> <span class="string">&quot;SwiftUI&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">                .navigationTitle(<span class="variable">$title</span>)</span><br><span class="line">                .navigationBarTitleDisplayMode(.inline)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当标题反映用户输入的内容的名称时，这非常有用，因为这意味着您不需要在布局中添加额外的文本字段。</p>

        </div>

        <footer class="post-footer">
            <div class="post-nav">
                
                    <div class="post-nav-prev">
                        <span>上一篇</span>
                        <a href="/article/39062.html">【Hacking With Swift】Project10_CupcakeCorner</a>
                    </div>
                
                
                    <div class="post-nav-next">
                        <span>下一篇</span>
                        <a href="/article/53249.html">【Hacking With Swift】project8_MoonShot</a>
                    </div>
                
            </div>
        </footer>

        
            <div class="post-comments">
                <h3 class="comments-title">评论</h3>
                <div id="waline"></div>
            </div>
        
    </article>
</div>


    <script type="module">
        import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';

        init({
            el: '#waline',
            serverURL: 'https://walinecomments.five2fire.top',
            dark: 'auto',
            lang: 'zh-CN',
            pageview: true,
            comment: true,
            emoji: ["https://unpkg.com/@waline/emojis@1.1.0/weibo","https://unpkg.com/@waline/emojis@1.1.0/bilibili"]
        });
    </script>
    <link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline.css" />


            </main>
        </div>
        
    </div>
    
<script src="/js/main.js"></script>

</body>
</html>
