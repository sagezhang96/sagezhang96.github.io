<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Sage自留地😎</title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Sage自留地😎" type="application/atom+xml">
</head>
<body>
    <div class="container">
        <header class="header">
    <div class="site-title">
        <a href="/">Sage自留地😎</a>
    </div>
    <div class="nav-toggle">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <nav class="nav">
        <ul class="nav-list">
            
                
                    <li class="nav-item">
                        <a href="/">首页</a>
                    </li>
                
            
                
                    <li class="nav-item has-children">
                        <a href="javascript:void(0);">文章</a>
                        <ul class="nav-submenu">
                            
                                <li class="nav-submenu-item">
                                    <a href="/archives">归档</a>
                                </li>
                            
                                <li class="nav-submenu-item">
                                    <a href="/categories">分类</a>
                                </li>
                            
                                <li class="nav-submenu-item">
                                    <a href="/tags">标签</a>
                                </li>
                            
                        </ul>
                    </li>
                
            
                
                    <li class="nav-item">
                        <a href="/about">关于</a>
                    </li>
                
            
        </ul>
    </nav>
</header>

        <div class="main-container">
            <main class="main-content">
                <article class="post-detail">
    <header class="post-header">
        <h1 class="post-title">Hacking With Swift —— Project1——3</h1>
        <div class="post-meta">
            <span class="post-date">
                2023-08-01
            </span>
            
                <span class="post-category">
                    <a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>
                </span>
            
            
                <span class="post-tags">
                    <a class="tag-none-link" href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag">编程</a>
                </span>
            
        </div>
    </header>

    <div class="post-content">
        <p><em><strong><font color=red>英文原博博主是</font></strong></em>   <a href="/about">Paul Hudson</a>    <i aria-hidden="true" class="fab fa-twitter" style="color: #4099ff"></i> <a href="https://twitter.com/twostraws" target="_blank">@twostraws</a></p>
<p><em><strong><font color=red>本文是学习Swift过程中翻译该网站的内容:</font></strong></em>   <a target="_blank" rel="noopener" href="https://www.hackingwithswift.com/">https://www.hackingwithswift.com/</a></p>
<h1 id="Hacking-With-Swift-Learning-Notes"><a href="#Hacking-With-Swift-Learning-Notes" class="headerlink" title="Hacking With Swift Learning Notes"></a>Hacking With Swift Learning Notes</h1><h2 id="Project1-WeSplit"><a href="#Project1-WeSplit" class="headerlink" title="Project1. WeSplit"></a>Project1. WeSplit</h2><h3 id="1-Swift应用程序的基本结构"><a href="#1-Swift应用程序的基本结构" class="headerlink" title="1. Swift应用程序的基本结构"></a>1. Swift应用程序的基本结构</h3><p>&amp;emsp;&amp;emsp;按照Xcode中的默认步骤创建一个IOS项目，项目中会自动生成两个Swift文件，一个是以自定义名称命名的文件（这个项目里就是WeSplitApp），另一个是ContentView。刚开始的项目，我们都只是在ContentView这个文件中编辑代码。WeSplitApp中，调用ContentView文件即可运行程序。另外，所有项目中用到的其他文件，需要保存在Assets文件夹中。<br>在ContentView文件中，默认会有以下这几行代码。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;  <span class="comment">//创建一个新的struct，符合View协议</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;   <span class="comment">//定义一个新的计算属性body</span></span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)<span class="comment">//创建一个文本视图</span></span><br><span class="line">            .padding()      <span class="comment">//修饰符，用来修饰文本视图</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView_Previews</span>: <span class="title class_">PreviewProvider</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ContentView</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;                           <span class="comment">//这个结构不会显示在APP中，也不会构成最终应用的一部分，专供Xcode使用，用于预览的</span></span><br></pre></td></tr></table></figure>

<p>这会在右侧的Canvas的预览显示一个文字框。也是最简单的结构。后面介绍许多修饰器的时候，都会在这个最简单的Text框上进行演示。下方的带有Preview字段的struct只和预览有关，不会在正式的APP中显示。<br>如果在修改代码的过程中出错，右侧Canvas中的预览会暂停自动生成，此时使用快捷键<code>Option+Cmd+P</code>与单击“恢复”的效果相同，自动预览。</p>
<h3 id="2-创建表单"><a href="#2-创建表单" class="headerlink" title="2. 创建表单"></a>2. 创建表单</h3><p>Form是一种View，每一个Form中，可以存放最多十个SwiftUI视图——不仅仅是Form有这种限制，由于Swift内部限制，很多地方都有这个“十个”的限制。如果想要放置超过十个视图，可以通过Group来进行打包，如果想在视觉上把每组视图去分开，用Section视图替代Group视图。</p>
<p>将基本的文本视图包装在基础表单视图内的效果，与单纯一个文本视图是不一样的，以前 Hello World 位于白色屏幕的中心，但现在屏幕是浅灰色的，Hello World 以白色显示在左上角。代码如下</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Form</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">            .padding()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一个Form内最多限制10个视图，这在Swift中很多地方都有这个“10”的限制。超出10个可以使用Group或者Section视图进行包装之后再放入Form中。</p>
<p>Section的最后可以加上header，并使用一个Text视图表现标题</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Section</span> &#123;</span><br><span class="line">    <span class="type">Picker</span>(<span class="string">&quot;Tip percentage&quot;</span>, selection: <span class="variable">$tipPercentage</span>) &#123;</span><br><span class="line">        <span class="type">ForEach</span>(tipPercentages, id: \.<span class="keyword">self</span>) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="variable">$0</span>, format: .percent)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .pickerStyle(.segmented)</span><br><span class="line">&#125; header: &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;How much tip do you want to leave?&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-创建导航栏"><a href="#3-创建导航栏" class="headerlink" title="3. 创建导航栏"></a>3. 创建导航栏</h3><p>导航栏视图——NavigationView。可以使用.navigationTitle()来修饰该视图，还有其他的修饰器。</p>
<p>对比一下两种实际效果（Xcode中预览）</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Form</span> &#123;</span><br><span class="line">            <span class="type">Section</span> &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">NavigationView</span> &#123;</span><br><span class="line">        <span class="type">Form</span> &#123;</span><br><span class="line">            <span class="type">Section</span> &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//.navigationTitle(&quot;SwiftUI&quot;)                   //添加导航栏标题（会创建新视图</span></span><br><span class="line">    <span class="comment">//.navigationBarTitleDisplayMode(.inline)       //导航栏标题变成小字体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-修改程序状态"><a href="#4-修改程序状态" class="headerlink" title="4. 修改程序状态"></a>4. 修改程序状态</h3><p>属性包装器：@State。一般在struct中创建一些变量时会用到，通常与private连用，<br>@State private var + 变量名</p>
<p>当创建想要更改属性的结构体方法时，我们需要添加关键字<code>mutating</code>。<code>mutating func doSomeWork()</code></p>
<h3 id="5-值绑定"><a href="#5-值绑定" class="headerlink" title="5. 值绑定"></a>5. 值绑定</h3><p>使用美元符号进行值与界面中元素的双向绑定。$<br>比如以下代码。在文本框中填写文本时，会自动将填写的内容赋值给变量name。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> name <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Form</span> &#123;</span><br><span class="line">            <span class="type">TextField</span>(<span class="string">&quot;Enter your name&quot;</span>, text: <span class="variable">$name</span>)</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-在循环中创建视图（这一部份需要多练习透）"><a href="#6-在循环中创建视图（这一部份需要多练习透）" class="headerlink" title="6. 在循环中创建视图（这一部份需要多练习透）"></a>6. 在循环中创建视图（这一部份需要多练习透）</h3><p>想要在循环内创建多个 SwiftUI 视图是很常见的。例如，我们可能想要循环遍历一组名称，并让每个名称都是一个文本视图，或者循环遍历一组菜单项，并将每个名称显示为图像。</p>
<p>SwiftUI 为此目的提供了一个专用的视图类型，称为<code>ForEach</code>. 这可以循环数组和范围，根据需要创建尽可能多的视图。更好的是，<code>ForEach</code>如果我们手动输入视图，就不会受到 10 次视图限制的影响。</p>
<p>在创建视图的时候加上ForEach，会为循环的每一个项目都运行一次闭包。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">```swift</span><br><span class="line">Form &#123;</span><br><span class="line">    ForEach(0..&lt;100) &#123; number in</span><br><span class="line">        Text(&quot;Row \(number)&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-获取用户的输入（为输入框加入format修饰）"><a href="#7-获取用户的输入（为输入框加入format修饰）" class="headerlink" title="7. 获取用户的输入（为输入框加入format修饰）"></a>7. 获取用户的输入（为输入框加入format修饰）</h3><p>本项目中的例子是输入美元，USD，使用了</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TextField</span>(<span class="string">&quot;Amount&quot;</span>, value: <span class="variable">$checkAmount</span>, format: .currency(code: <span class="string">&quot;USD&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>上面的表述固定了输入为美元，更好的格式是</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TextField</span>(<span class="string">&quot;Amount&quot;</span>, value: <span class="variable">$checkAmount</span>, </span><br><span class="line">    format: .currency(code: <span class="type">Locale</span>.current.currencyCode <span class="operator">??</span> <span class="string">&quot;USD&quot;</span>))</span><br><span class="line">    .keyboardType(.decimalPad)</span><br></pre></td></tr></table></figure>
<p>最后的.keyboradType可以制定键盘类型。</p>
<h3 id="8-在表单中添加选择器"><a href="#8-在表单中添加选择器" class="headerlink" title="8. 在表单中添加选择器"></a>8. 在表单中添加选择器</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Picker</span>(<span class="string">&quot;Number of people&quot;</span>, selection: <span class="variable">$numberOfPeople</span>) &#123;</span><br><span class="line">    <span class="type">ForEach</span>(<span class="number">2</span> <span class="operator">..&lt;</span> <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;<span class="subst">\(<span class="variable">$0</span>)</span> people&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">.pickerStyle(.segmented)</span><br></pre></td></tr></table></figure>
<p>可以使用pickerStyle来修饰选择器的样式</p>
<h3 id="9-隐藏键盘"><a href="#9-隐藏键盘" class="headerlink" title="9. 隐藏键盘"></a>9. 隐藏键盘</h3><p>监测文本框的聚焦状态，当焦点聚焦于文本框时，出现键盘，点击键盘上的Done取消聚焦状态。使用一个变量来保存这个聚焦状态。<br>详情见<br><a target="_blank" rel="noopener" href="https://www.hackingwithswift.com/books/ios-swiftui/hiding-the-keyboard">https://www.hackingwithswift.com/books/ios-swiftui/hiding-the-keyboard</a></p>
<h2 id="Project2-Guess-the-flag"><a href="#Project2-Guess-the-flag" class="headerlink" title="Project2. Guess the flag"></a>Project2. Guess the flag</h2><h3 id="1-使用堆栈来排列视图"><a href="#1-使用堆栈来排列视图" class="headerlink" title="1. 使用堆栈来排列视图"></a>1. 使用堆栈来排列视图</h3><p>HStack&#x2F;VStack&#x2F;ZStack分别是水平，垂直和堆叠视图。<br>类似于前面提到的Group还有Section的视图，堆栈可以将很多歌some View视图组合起来展示。</p>
<h3 id="2-颜色和框架"><a href="#2-颜色和框架" class="headerlink" title="2. 颜色和框架"></a>2. 颜色和框架</h3><p>可以为上述的some View视图加一些修饰，比如.backgroud(.red)可以为背景加上红色。如果想要整个视图的背景都是红色，可以将Color.red视图堆叠在Text视图下（使用ZStack）。如果想要限制背景颜色区域大小，可以为Color.red加上框架——使用.frame(wideth: 200, height: 200)。<br>  frame中可以限制最小&#x2F;最大宽度。最大宽度可以设置为.infinity来适应不同的屏幕。<br>  默认的视图并不会完全的充满整个屏幕，因为还存在SafeArea，为视图添加.ignoreSafeArea()来让视图充满整个空间。一般不要将重要的内容放入安全区域，只有一些装饰性的内容可以拓展到安全区域之外。<br>可以为视图添加不同的效果，比如.background(.ultraThinMaterial)可以添加磨砂玻璃的背景颜色效果，.foregroundColor(.secondary)或者是.foregroundStyle(.secondary)。可以查看不同的前景效果。</p>
<h3 id="3-渐变色（梯度）"><a href="#3-渐变色（梯度）" class="headerlink" title="3. 渐变色（梯度）"></a>3. 渐变色（梯度）</h3><p>三种方式：LinearGradient和RadialGradient以及AngularGradient。具体方式可以参考下面的内容</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">LinearGradient</span>(gradient: <span class="type">Gradient</span>(stops: [</span><br><span class="line">    .<span class="keyword">init</span>(color: .white, location: <span class="number">0.45</span>),</span><br><span class="line">    .<span class="keyword">init</span>(color: .black, location: <span class="number">0.55</span>),</span><br><span class="line">]), startPoint: .top, endPoint: .bottom)</span><br><span class="line"></span><br><span class="line"><span class="type">RadialGradient</span>(gradient: <span class="type">Gradient</span>(colors: [.blue, .black]), center: .center, startRadius: <span class="number">20</span>, endRadius: <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line"><span class="type">AngularGradient</span>(gradient: <span class="type">Gradient</span>(colors: [.red, .yellow, .green, .blue, .purple, .red]), center: .center)</span><br></pre></td></tr></table></figure>
<h3 id="4-按钮和图像"><a href="#4-按钮和图像" class="headerlink" title="4. 按钮和图像"></a>4. 按钮和图像</h3><p>按钮的基本格式</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button（</span>“description text”）&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;blablabla...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里使用了闭包的形式，也可以是任何一个函数</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;Delete selection&quot;</span>, action: executeDelete)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">func</span> <span class="title function_">executeDelete</span>() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Now deleting…&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用.buttonStyle来更改按钮样式，使用尾随闭包来定义标签。</p>
<h3 id="5-显示提示对话框"><a href="#5-显示提示对话框" class="headerlink" title="5.显示提示对话框"></a>5.显示提示对话框</h3><p>先定义一个对话框是否显示的变量来记录对话框显示状态</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> showingAlert <span class="operator">=</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>最简单的显示警报的代码：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> showingAlert <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;Show Alert&quot;</span>) &#123;</span><br><span class="line">            showingAlert <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        .alert(<span class="string">&quot;Important message&quot;</span>, isPresented: <span class="variable">$showingAlert</span>) &#123;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;OK&quot;</span>) &#123; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当点击按钮的时候，修改刚才定义的状态变量，这个变量在<code>.alert</code>中作为参数传入<code>isPresent</code>中。</p>
<p>可以向提醒框添加多个按钮，并添加按钮的角色</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.alert(<span class="string">&quot;Important message&quot;</span>, isPresented: <span class="variable">$showingAlert</span>) &#123;</span><br><span class="line">    <span class="type">Button</span>(<span class="string">&quot;Delete&quot;</span>, role: .destructive) &#123; &#125;</span><br><span class="line">    <span class="type">Button</span>(<span class="string">&quot;Cancel&quot;</span>, role: .cancel) &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后，您可以在标题旁边添加消息文本，并带有第二个尾随闭包，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(<span class="string">&quot;Show Alert&quot;</span>) &#123;</span><br><span class="line">    showingAlert <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">.alert(<span class="string">&quot;Important message&quot;</span>, isPresented: <span class="variable">$showingAlert</span>) &#123;</span><br><span class="line">    <span class="type">Button</span>(<span class="string">&quot;OK&quot;</span>, role: .cancel) &#123; &#125;</span><br><span class="line">&#125; message: &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Please read this.&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-堆叠按钮"><a href="#6-堆叠按钮" class="headerlink" title="6. 堆叠按钮"></a>6. 堆叠按钮</h3><p>先定义国家和答案，然后在按钮上加入label并引用这个图片样式（图片已经添加到asset文件夹）。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> countries <span class="operator">=</span> [<span class="string">&quot;Estonia&quot;</span>, <span class="string">&quot;France&quot;</span>, <span class="string">&quot;Germany&quot;</span>, <span class="string">&quot;Ireland&quot;</span>, <span class="string">&quot;Italy&quot;</span>, <span class="string">&quot;Nigeria&quot;</span>, <span class="string">&quot;Poland&quot;</span>, <span class="string">&quot;Russia&quot;</span>, <span class="string">&quot;Spain&quot;</span>, <span class="string">&quot;UK&quot;</span>, <span class="string">&quot;US&quot;</span>]</span><br><span class="line"><span class="keyword">var</span> correctAnswer <span class="operator">=</span> <span class="type">Int</span>.random(in: <span class="number">0</span><span class="operator">...</span><span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span><span class="number">3</span>) &#123; number <span class="keyword">in</span></span><br><span class="line">    <span class="type">Button</span> &#123;</span><br><span class="line">       <span class="comment">// flag was tapped</span></span><br><span class="line">    &#125; label: &#123;</span><br><span class="line">        <span class="type">Image</span>(countries[number])</span><br><span class="line">            .renderingMode(.original)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-使用修饰符升级设计"><a href="#7-使用修饰符升级设计" class="headerlink" title="7.使用修饰符升级设计"></a>7.使用修饰符升级设计</h3><p>例如在VStack后添加如下修饰符</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.frame(maxWidth: .infinity)</span><br><span class="line">.padding(.vertical, <span class="number">20</span>)</span><br><span class="line">.background(.regularMaterial)</span><br><span class="line">.clipShape(<span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">20</span>))</span><br></pre></td></tr></table></figure>

<p>这样就可以调整大小以占据所需的所有水平空间，添加一点垂直填充，应用背景材料，使其从背景的红蓝色渐变中脱颖而出，最后将整个内容剪辑成圆角矩形的形状。</p>
<h2 id="Project3-Views-and-modifiers"><a href="#Project3-Views-and-modifiers" class="headerlink" title="Project3. Views and modifiers"></a>Project3. Views and modifiers</h2><h3 id="1-视图和修饰符的简介"><a href="#1-视图和修饰符的简介" class="headerlink" title="1.视图和修饰符的简介"></a>1.视图和修饰符的简介</h3><p>在这个项目中，我们将弄明白为什么Swift中使用结构体而不是用类来编程，以及为什么<code>some View</code>有那么多。</p>
<p>在项目结尾希望你能够彻底了解Swift是通过什么运转起来的。</p>
<h3 id="2-为什么-SwiftUI-对视图使用结构体？"><a href="#2-为什么-SwiftUI-对视图使用结构体？" class="headerlink" title="2.为什么 SwiftUI 对视图使用结构体？"></a>2.为什么 SwiftUI 对视图使用结构体？</h3><p>一个是为了性能考虑，结构体的创建很简单，可以包含一个整数，也可以包含一个复杂结构。</p>
<p>另外，除了性能方面，还有一个很重要的原因，就是隔离。我们可以更改类中的值，这会导致混乱，但想要更改结构体中的值，需要使用特定的方法。</p>
<h3 id="3-SwiftUI-主视图的背后是什么？"><a href="#3-SwiftUI-主视图的背后是什么？" class="headerlink" title="3.SwiftUI 主视图的背后是什么？"></a>3.SwiftUI 主视图的背后是什么？</h3><p>在刚创建一个新项目的时候，会有以下默认代码，如果希望修改背景颜色，仅仅做出以下改变是不够的：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">            .padding()</span><br><span class="line">            .background(.red)</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>因为这里的<code>.background(.red)</code>只作用于Text这么大小的视图，并不能应用于整个背景，事实上，整个视图除了这个Text视图外，并没有一个叫“背景”的视图，如果你想要填充背景，正确的解决方案就是让文本视图占用更多空间，可以使用<code>frame()</code>修饰符来做到这一点。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">    .frame(maxWidth: .infinity, maxHeight: .infinity)</span><br><span class="line">    .background(.red)</span><br></pre></td></tr></table></figure>
<h3 id="4-修饰顺序也很重要"><a href="#4-修饰顺序也很重要" class="headerlink" title="4.修饰顺序也很重要"></a>4.修饰顺序也很重要</h3><p>每个修饰符都创建一个应用了该修饰符的新结构，而不是仅仅在视图上设置一个属性。</p>
<p>使用修饰符的一个重要副作用是我们可以多次应用相同的效果：每个都只是添加到之前的任何内容上。 </p>
<p>例如，SwiftUI 为我们提供了padding()修饰符，它在视图周围增加了一点空间，这样它就不会向上推到其他视图或屏幕边缘。如果我们应用 padding 然后是背景颜色，然后是更多的 padding 和不同的背景颜色，我们可以给视图多个边框，像这样： </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;Hello, world!&quot;</span>)</span><br><span class="line">    .padding()</span><br><span class="line">    .background(.red)</span><br><span class="line">    .padding()</span><br><span class="line">    .background(.blue)</span><br><span class="line">    .padding()</span><br><span class="line">    .background(.green)</span><br><span class="line">    .padding()</span><br><span class="line">    .background(.yellow)</span><br></pre></td></tr></table></figure>

<h3 id="5-为什么-SwiftUI-使用“some-View”作为它的视图类型？"><a href="#5-为什么-SwiftUI-使用“some-View”作为它的视图类型？" class="headerlink" title="5.为什么 SwiftUI 使用“some View”作为它的视图类型？"></a>5.为什么 SwiftUI 使用“some View”作为它的视图类型？</h3><p>表示这个结构中包含不同种视图类型，如果只包含一种，比如Text类型，也可以使用Text作为视图类型，例如</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="type">Text</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>这个也是完全合法的</p>
<h3 id="6-条件修饰符"><a href="#6-条件修饰符" class="headerlink" title="6.条件修饰符"></a>6.条件修饰符</h3><p>使用三元运算符替代if语句，if语句在一些情况下效率比较低，使用三元运算符会大大简化代码。例如：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> useRedText <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;Hello World&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">// flip the Boolean between true and false</span></span><br><span class="line">            useRedText.toggle()</span><br><span class="line">        &#125;</span><br><span class="line">        .foregroundColor(useRedText <span class="operator">?</span> .red : .blue)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此，当<code>useRedText</code>为 <code>true </code>时，修饰符有效地读取<code>.foregroundColor(.red)</code>，而当它为<code>false</code>时，修饰符变为<code>.foregroundColor(.blue)</code>。因为 SwiftUI 会监视我们<code>@State属性</code>的变化并重新调用我们的body属性，所以只要该属性发生变化，颜色就会立即更新。  </p>
<h3 id="7-环境修饰符"><a href="#7-环境修饰符" class="headerlink" title="7.环境修饰符"></a>7.环境修饰符</h3><p>许多修饰符可以应用于容器，这允许我们同时将相同的修饰符应用于多个视图。</p>
<p>例如，如果我们在一个 VStack中有四个文本视图，并希望为它们提供相同的字体修饰符，我们可以直接将修饰符应用于VStack并将该更改应用于所有四个文本视图：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">VStack</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Gryffindor&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hufflepuff&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Ravenclaw&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Slytherin&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">.font(.title)</span><br></pre></td></tr></table></figure>

<p>这称为环境修改器，不同于应用于视图的常规修改器。</p>
<p>从编码的角度来看，这些修饰符的使用方式与常规修饰符完全相同。但是，它们的行为略有不同，因为如果这些子视图中的任何一个覆盖了相同的修饰符，则子视图的版本优先。</p>
<p>例如，这显示了我们的四个带有标题字体的文本视图，但其中一个标题较大：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">VStack</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Gryffindor&quot;</span>)</span><br><span class="line">        .font(.largeTitle)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hufflepuff&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Ravenclaw&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Slytherin&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">.font(.title)</span><br></pre></td></tr></table></figure>

<p>那里有font()一个环境修饰符，这意味着 Gryffindor 文本视图可以用自定义字体覆盖它。</p>
<p>但是，这对VStack然后尝试在其中一个文本视图上禁用模糊应用了模糊效果：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">VStack</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Gryffindor&quot;</span>)</span><br><span class="line">        .blur(radius: <span class="number">0</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hufflepuff&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Ravenclaw&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Slytherin&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">.blur(radius: <span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<p>这不会以相同的方式工作：blur()是常规修改器，因此应用于子视图的任何模糊都将添加到VStack模糊而不是替换它。</p>
<p>但我们没有办法提前知道哪些修改器是环境修改器，哪些是常规修改器，除非阅读每个修改器的单独文档并希望它被提及。尽管如此，有总比没有好。</p>
<h3 id="8-视图作为属性"><a href="#8-视图作为属性" class="headerlink" title="8.视图作为属性"></a>8.视图作为属性</h3><p>有很多方法可以让 SwiftUI 中的复杂视图层次结构更容易使用，其中一种选择是使用属性——创建一个视图作为你自己视图的属性，然后在你的布局中使用该属性。</p>
<p>例如，我们可以像这样创建两个文本视图作为属性，然后在一个VStack中使用它们：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> motto1 <span class="operator">=</span> <span class="type">Text</span>(<span class="string">&quot;Draco dormiens&quot;</span>)</span><br><span class="line">    <span class="keyword">let</span> motto2 <span class="operator">=</span> <span class="type">Text</span>(<span class="string">&quot;nunquam titillandus&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            motto1</span><br><span class="line">            motto2</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你甚至可以在使用这些属性时直接将修饰符应用于它们，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">VStack</span> &#123;</span><br><span class="line">    motto1</span><br><span class="line">        .foregroundColor(.red)</span><br><span class="line">    motto2</span><br><span class="line">        .foregroundColor(.blue)</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>将视图创建为属性有助于使你的body代码更清晰——它不仅有助于避免重复，而且还可以从body属性中获取更复杂的代码。  </p>
<h3 id="9-查看组成"><a href="#9-查看组成" class="headerlink" title="9.查看组成"></a>9.查看组成</h3><p>SwiftUI 让我们可以将复杂的视图分解成更小的视图，而不会对性能产生太大影响。这意味着我们可以将一个大视图拆分为多个较小的视图，而 SwiftUI 会负责为我们重新组装它们。</p>
<p>例如，在这个视图中，我们有一种特殊的方式来设置文本视图的样式——它们有一个大字体、一些填充、前景色和背景色，以及一个胶囊形状：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(spacing: <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;First&quot;</span>)</span><br><span class="line">                .font(.largeTitle)</span><br><span class="line">                .padding()</span><br><span class="line">                .foregroundColor(.white)</span><br><span class="line">                .background(.blue)</span><br><span class="line">                .clipShape(<span class="type">Capsule</span>())</span><br><span class="line"></span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Second&quot;</span>)</span><br><span class="line">                .font(.largeTitle)</span><br><span class="line">                .padding()</span><br><span class="line">                .foregroundColor(.white)</span><br><span class="line">                .background(.blue)</span><br><span class="line">                .clipShape(<span class="type">Capsule</span>())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为这两个文本视图除了文本之外是相同的，所以我们可以将它们包装在一个新的自定义视图中，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CapsuleText</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> text: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(text)</span><br><span class="line">            .font(.largeTitle)</span><br><span class="line">            .padding()</span><br><span class="line">            .foregroundColor(.white)</span><br><span class="line">            .background(.blue)</span><br><span class="line">            .clipShape(<span class="type">Capsule</span>())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后我们可以在原始视图中使用该CapsuleText视图，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span>(spacing: <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="type">CapsuleText</span>(text: <span class="string">&quot;First&quot;</span>)</span><br><span class="line">            <span class="type">CapsuleText</span>(text: <span class="string">&quot;Second&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当然，我们也可以在视图中存储一些修饰符，在使用时自定义其他的。例如，如果我们从CapsuleText中删除foregroundColor()，那么我们可以在创建该视图的实例时应用自定义颜色，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">VStack</span>(spacing: <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="type">CapsuleText</span>(text: <span class="string">&quot;First&quot;</span>)</span><br><span class="line">        .foregroundColor(.white)</span><br><span class="line">    <span class="type">CapsuleText</span>(text: <span class="string">&quot;Second&quot;</span>)</span><br><span class="line">        .foregroundColor(.yellow)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不要担心这里的性能问题——以这种方式分解 SwiftUI 视图非常有效。  </p>
<h3 id="10-自定义修饰符"><a href="#10-自定义修饰符" class="headerlink" title="10.自定义修饰符"></a>10.自定义修饰符</h3><p>要创建自定义修饰符，请创建一个符合ViewModifier协议的新结构。这只有一个要求，即一种被调用的方法body，它接受要处理的任何内容，并且必须返回some View。 </p>
<p>例如：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Title</span>: <span class="title class_">ViewModifier</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">body</span>(<span class="params">content</span>: <span class="type">Content</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        content</span><br><span class="line">            .font(.largeTitle)</span><br><span class="line">            .foregroundColor(.white)</span><br><span class="line">            .padding()</span><br><span class="line">            .background(.blue)</span><br><span class="line">            .clipShape(<span class="type">RoundedRectangle</span>(cornerRadius: <span class="number">10</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>我们现在可以将它与modifier()修饰符一起使用——是的，它是一个名为“modifier”的修饰符，但它允许我们将任何类型的修饰符应用于视图，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    .modifier(<span class="type">Title</span>()) </span><br></pre></td></tr></table></figure>

<p>创建自定义View之后，创建扩展以View使其更易于使用 例如，我们可以将Title修饰符包装在这样的扩展中：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">titleStyle</span>() -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        modifier(<span class="type">Title</span>())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们现在可以像这样使用修饰符：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    .titleStyle() </span><br></pre></td></tr></table></figure>

<p>自定义修饰符可以做的不仅仅是应用其他现有修饰符——它们还可以根据需要创建新的视图结构。请记住，修饰符返回新对象而不是修改现有对象，因此我们可以创建一个将视图嵌入堆栈并添加另一个视图的对象：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Watermark</span>: <span class="title class_">ViewModifier</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> text: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">body</span>(<span class="params">content</span>: <span class="type">Content</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span>(alignment: .bottomTrailing) &#123;</span><br><span class="line">            content</span><br><span class="line">            <span class="type">Text</span>(text)</span><br><span class="line">                .font(.caption)</span><br><span class="line">                .foregroundColor(.white)</span><br><span class="line">                .padding(<span class="number">5</span>)</span><br><span class="line">                .background(.black)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">watermarked</span>(<span class="params">with</span> <span class="params">text</span>: <span class="type">String</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        modifier(<span class="type">Watermark</span>(text: text))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>有了它，我们现在可以像这样向任何视图添加水印：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Color</span>.blue</span><br><span class="line">    .frame(width: <span class="number">300</span>, height: <span class="number">200</span>)</span><br><span class="line">    .watermarked(with: <span class="string">&quot;Hacking with Swift&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>提示：通常人们想知道什么时候添加自定义视图修饰符比只添加一个新方法给View更好，实际上这归结为一个主要原因：自定义视图修饰符可以有自己的存储属性，而扩展View则不能。 </p>
<h3 id="11-定制容器"><a href="#11-定制容器" class="headerlink" title="11.定制容器"></a>11.定制容器</h3><p>利用泛型创建一些自定义容器，并在容器中加入任何自定义内容。</p>
<p>在 Swift 中，我们会这样写：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">GridStack</span>&lt;<span class="title class_">Content</span>: <span class="title class_">View</span>&gt;: <span class="title class_">View</span> &#123; <span class="comment">//这一部分是Swift的一个高级特性，称为泛型。</span></span><br><span class="line">    <span class="keyword">let</span> rows: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">let</span> columns: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">let</span> content: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Content</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="comment">// more to come</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>特别注意这一let content行——它定义了一个必须能够接受两个整数并返回某种我们可以显示的内容的闭包。拥有这一行所以才叫做定制容器。</p>
<p>在body中我们可以这么写</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">VStack</span> &#123;</span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>rows, id: \.<span class="keyword">self</span>) &#123; row <span class="keyword">in</span></span><br><span class="line">            <span class="type">HStack</span> &#123;</span><br><span class="line">                <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>columns, id: \.<span class="keyword">self</span>) &#123; column <span class="keyword">in</span></span><br><span class="line">                    content(row, column)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在我们有了一个自定义容器，我们可以像这样使用它编写一个视图：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">GridStack</span>(rows: <span class="number">4</span>, columns: <span class="number">4</span>) &#123; row, col <span class="keyword">in</span></span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;R<span class="subst">\(row)</span> C<span class="subst">\(col)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Milestone-Project1-3"><a href="#Milestone-Project1-3" class="headerlink" title="Milestone Project1-3"></a>Milestone Project1-3</h2><h3 id="挑战"><a href="#挑战" class="headerlink" title="挑战"></a>挑战</h3><p>制作一款大脑训练游戏，挑战玩家在剪刀石头布中输赢。</p>
<p>以下是简单的游戏规则：</p>
<p>游戏的每一轮，应用程序都会随机选择石头、布或剪刀，并提示玩家这轮应该赢或者是输。（可以输赢交替也可以随机）</p>
<p>然后玩家必须点击正确的选项来根据提示赢得或输掉游戏。</p>
<p>如果玩家选择正确（按照提示：让你输你就输，让你赢你就赢），玩家得分；否则玩家失去一分。</p>
<p>游戏在 10 个问题后结束，此时会显示玩家最终所得的分数。</p>
<p>因此，如果应用程序选择“Rock”和“Win”，则玩家需要选择“Paper”，但如果应用程序选择“Rock”和“Lose”，则玩家需要选择“Scissors”。 </p>
<h3 id="复习前面所学内容（预计挑战中要用到的）"><a href="#复习前面所学内容（预计挑战中要用到的）" class="headerlink" title="复习前面所学内容（预计挑战中要用到的）"></a>复习前面所学内容（预计挑战中要用到的）</h3><ul>
<li>使用堆栈排列视图：这个游戏里需要以下几个视图：<ol>
<li>一个导航视图NavigationView，展示该游戏的名称“石头剪刀布智力训练”</li>
<li>一个记录当前得分的文本视图</li>
<li>一个展示电脑选的手势（石头剪刀布）以及电脑要求本轮游戏的结果（win or lose）的视图</li>
<li>一个展示玩家选择的手势的视图（包含三个按钮）</li>
<li>玩家每轮选择手势后，实时结果反馈的视图（可选，也可以所有轮次结束后直接给出游戏得分）</li>
<li>提前结束游戏的按钮视图（可选）</li>
<li>选择游戏总轮次视图（可选）</li>
</ol>
</li>
<li>值绑定：需要将当前玩家所选手势赋值给一个变量。</li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<h3 id="教程所给的提示"><a href="#教程所给的提示" class="headerlink" title="教程所给的提示"></a>教程所给的提示</h3><p>要解决这个挑战，你需要利用在教程 1 和 2 中学到的技能：</p>
<ol>
<li><p>从一个 App 模板开始，然后创建一个属性来存储三种可能的移动：石头、布和剪刀。</p>
</li>
<li><p>你需要创建两个@State属性来存储应用程序的当前选择以及玩家应该赢还是输。</p>
</li>
<li><p>你可以使用Int.random(in:)来选择一个随机移动。如果你愿意，你可以用它来决定玩家是否也应该赢，但还有一个更简单的选择：Bool.random()随机为真或为假。在初始值之后，toggle()在两轮之间使用，因此它总是在变化。</p>
</li>
<li><p>创建一个VStack显示玩家得分、应用程序移动以及玩家应该赢还是输的图表。你可以使用if shouldWin返回两个不同文本视图之一。</p>
</li>
<li><p>重要的部分是制作三个响应玩家移动的按钮：Rock、Paper 或 Scissors。</p>
</li>
<li><p>使用font()修饰符调整文本的大小。如果你在这三个动作中使用表情符号，它们也会缩放。提示：你可以要求使用非常大的系统字体.font(.system(size: 200))——它们将是固定大小，但至少你可以确保它们既漂亮又大！</p>
</li>
</ol>
<p>提示：</p>
<ol>
<li><p>从最简单的逻辑开始：三个按钮，每个按钮都有这样的逻辑：“玩家点击了石头，玩家试图获胜，应用程序选择了剪刀，所以加 1 分。”</p>
</li>
<li><p>一旦你有了这个工作，寻找一种方法来简化你的逻辑，例如一个数组，其中的项目击败了每一步。例如，如果你的移动数组是[“Rock”, “Paper”, “Scissors”]你的获胜移动数组[“Paper”, “Scissors”, “Rock”]。</p>
</li>
<li><p>如果你不想，你不需要添加图形；只需一些文本视图和按钮就足够了。为什么不试试表情符号？</p>
</li>
</ol>

    </div>

    <footer class="post-footer">
        <div class="post-nav">
            
                <div class="post-nav-prev">
                    <span>上一篇</span>
                    <a href="/article/62807.html">运动过程中的一些小感想</a>
                </div>
            
            
                <div class="post-nav-next">
                    <span>下一篇</span>
                    <a href="/article/46888.html">CodeingDiaries</a>
                </div>
            
        </div>
    </footer>

    
        <div class="post-comments">
            <h3 class="comments-title">评论</h3>
            <div id="waline"></div>
        </div>
    
</article>


    <script type="module">
        import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';

        init({
            el: '#waline',
            serverURL: 'https://walinecomments.five2fire.top',
            dark: '',
            lang: 'zh-CN',
            pageview: true,
            comment: true,
            emoji: ["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili","https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"]
        });
    </script>
    <link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline.css" />



            </main>
        </div>
        
    </div>
    
<script src="/js/main.js"></script>

    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
</body>
</html>
