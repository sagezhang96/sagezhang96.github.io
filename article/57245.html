<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Sageè‡ªç•™åœ°ğŸ˜</title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Sageè‡ªç•™åœ°ğŸ˜" type="application/atom+xml">
</head>
<body>
    <div class="container">
        <header class="header">
    <div class="site-title">
        <a href="/">Sageè‡ªç•™åœ°ğŸ˜</a>
    </div>
    <div class="nav-toggle">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <nav class="nav">
        <ul class="nav-list">
            
                
                    <li class="nav-item">
                        <a href="/">é¦–é¡µ</a>
                    </li>
                
            
                
                    <li class="nav-item has-children">
                        <a href="javascript:void(0);">æ–‡ç« </a>
                        <ul class="nav-submenu">
                            
                                <li class="nav-submenu-item">
                                    <a href="/archives">å½’æ¡£</a>
                                </li>
                            
                                <li class="nav-submenu-item">
                                    <a href="/categories">åˆ†ç±»</a>
                                </li>
                            
                                <li class="nav-submenu-item">
                                    <a href="/tags">æ ‡ç­¾</a>
                                </li>
                            
                        </ul>
                    </li>
                
            
                
                    <li class="nav-item">
                        <a href="/about">å…³äº</a>
                    </li>
                
            
        </ul>
    </nav>
</header>

        <div class="main-container">
            <main class="main-content">
                <article class="post-detail">
    <header class="post-header">
        <h1 class="post-title">ã€Hacking With Swiftã€‘project6_Animation</h1>
        <div class="post-meta">
            <span class="post-date">
                2024-06-21
            </span>
            
                <span class="post-category">
                    <a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a>
                </span>
            
            
                <span class="post-tags">
                    <a class="tag-none-link" href="/tags/Hacking-with-Swift/" rel="tag">Hacking with Swift</a> <a class="tag-none-link" href="/tags/Swift/" rel="tag">Swift</a> <a class="tag-none-link" href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag">ç¼–ç¨‹</a>
                </span>
            
        </div>
    </header>

    <div class="post-content">
        <p><em><strong><font color=red>è‹±æ–‡åŸåšåšä¸»æ˜¯</font></strong></em>   <a target="_blank" rel="noopener" href="https://www.youtube.com/c/PaulHudson">Paul Hudson</a> Â Â  <i aria-hidden="true" class="fab fa-twitter" style="color: #4099ff"></i> <a href="https://twitter.com/twostraws" target="_blank">@twostraws</a></p>
<p><em><strong><font color=red>æœ¬æ–‡æ˜¯å­¦ä¹ Swiftè¿‡ç¨‹ä¸­ç¿»è¯‘è¯¥ç½‘ç«™çš„å†…å®¹:</font></strong></em>   <a target="_blank" rel="noopener" href="https://www.hackingwithswift.com/">https://www.hackingwithswift.com/</a><br>è¿™ä¸ªé¡¹ç›®ä¸»è¦æ˜¯å­¦ä¹ ä¸€äº›ç®€å•çš„SwiftUIä¸­çš„åŠ¨ç”»ï¼ŒåŒ…æ‹¬éšå¼åŠ¨ç”»ï¼ˆimplicit animationsï¼‰ï¼Œæ˜¾å¼åŠ¨ç”»ä»¥åŠç»‘å®šåŠ¨ç”»ã€‚</p>
<h2 id="éšå¼åŠ¨ç”»"><a href="#éšå¼åŠ¨ç”»" class="headerlink" title="éšå¼åŠ¨ç”»"></a>éšå¼åŠ¨ç”»</h2><p>éšå¼åŠ¨ç”»é€šè¿‡<code>.animation()</code>çš„modifieræŒ‡å®šï¼Œæ¯å½“è§†å›¾é‡ŒæŸä¸ªéšå¼åŠ¨ç”»çš„å‚æ•°æ”¹å˜æ—¶ï¼ŒSwiftUIä¼šåŠ¨ç”»åŒ–å‘ˆç°æ—§å€¼åˆ°æ–°å€¼çš„å˜åŒ–ã€‚è¿™äº›å‚æ•°åŒ…æ‹¬å°ºå¯¸ï¼Œåç§»é‡ï¼Œé¢œè‰²ï¼Œç¼©æ”¾å€¼ï¼Œç­‰ç­‰ã€‚è¿™äº›ä¿®é¥°å™¨åŒ…æ‹¬<code>scaleEffect</code>,<code>aniamtion</code>,<code>blur</code>,<code>opacity</code>ç­‰ç­‰ã€‚</p>
<p>ä¸‹é¢æ˜¯ç»™ä¸€ä¸ªåœ†å½¢æŒ‰é’®æ·»åŠ éšå¼åŠ¨ç”»çš„ä¾‹å­</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> animationAmount <span class="operator">=</span> <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line"><span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">// do nothing</span></span><br><span class="line">&#125;</span><br><span class="line">.padding(<span class="number">50</span>)</span><br><span class="line">.background(.red)</span><br><span class="line">.foregroundStyle(.white)</span><br><span class="line">.clipShape(.circle)</span><br><span class="line">.scaleEffect(animationAmount)</span><br><span class="line">.blur(radius: (animationAmount <span class="operator">-</span> <span class="number">1</span>) <span class="operator">*</span> <span class="number">3</span>)</span><br><span class="line">.animation(.default, value: animationAmount)</span><br></pre></td></tr></table></figure>

<h2 id="è‡ªå®šä¹‰åŠ¨ç”»"><a href="#è‡ªå®šä¹‰åŠ¨ç”»" class="headerlink" title="è‡ªå®šä¹‰åŠ¨ç”»"></a>è‡ªå®šä¹‰åŠ¨ç”»</h2><p>ä¸Šé¢ç”¨åˆ°çš„animationä¿®é¥°å™¨ï¼Œé‡Œé¢çš„å‚æ•°ä½¿ç”¨äº†<code>.defalut</code>ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„å‚æ•°æ¥è‡ªå®šä¹‰åŠ¨ç”»ã€‚</p>
<p>å¯ä»¥åˆ†åˆ«å°è¯•ä»¥ä¸‹çš„ä¸€äº›ä¾‹å­ï¼Œåœ¨Xcodeçš„é¢„è§ˆä¸­ï¼ŒæŸ¥çœ‹æ•ˆæœ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">//animationAmount += 1</span></span><br><span class="line">&#125;</span><br><span class="line">.padding(<span class="number">50</span>)</span><br><span class="line">.background(.red)</span><br><span class="line">.foregroundColor(.white)</span><br><span class="line">.clipShape(<span class="type">Circle</span>())</span><br><span class="line"><span class="comment">//.scaleEffect(animationAmount)</span></span><br><span class="line">.overlay(<span class="type">Circle</span>()</span><br><span class="line">    .stroke(.red)</span><br><span class="line">    .scaleEffect(animationAmount)</span><br><span class="line">    .opacity(<span class="number">2</span> <span class="operator">-</span> animationAmount)</span><br><span class="line">    .animation(.easeInOut(duration: <span class="number">1</span>).repeatForever(autoreverses: <span class="literal">false</span>), value: animationAmount) <span class="comment">//ä½¿ç”¨repeatforeveråˆ¶ä½œè¿ç»­åŠ¨ç”»</span></span><br><span class="line">    .onAppear&#123;</span><br><span class="line">        animationAmount <span class="operator">=</span> <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line">.animation(.interpolatingSpring(stiffness: <span class="number">50</span>, damping: <span class="number">1</span>), value: animationAmount) <span class="comment">//å¼¹ç°§åŠ¨ç”»ï¼Œå¿«é€Ÿæ”¾å¤§ç„¶ååå¼¹</span></span><br><span class="line">.animation(.default, value: animationAmount)</span><br><span class="line">.animation(.easeOut, value: animationAmount)</span><br><span class="line">.blur(radius: (animationAmount <span class="operator">-</span> <span class="number">1</span> ) <span class="operator">*</span> <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">.animation(.easeInOut(duration: <span class="number">2</span>), value: animationAmount) <span class="comment">//æŒç»­ä¸¤ç§’çš„ç¼“å…¥ç¼“å‡ºåŠ¨ç”»</span></span><br><span class="line">.animation(.easeOut(duration: <span class="number">2</span>).delay(<span class="number">1</span>), value: animationAmount) <span class="comment">//ç‚¹å‡»æŒ‰é’®ç°åœ¨å°†ç­‰å¾…ä¸€ç§’é’Ÿï¼Œç„¶åå†æ‰§è¡Œä¸¤ç§’é’Ÿçš„åŠ¨ç”»ã€‚</span></span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦æŠŠ<code>.animation</code>æ”¾åœ¨ä¿®é¥°å™¨æœ€åï¼Œè¿™æ ·é‚£äº›ç¼©æ”¾ï¼Œå°ºå¯¸å˜åŒ–ç­‰åŠ¨ç”»æ‰èƒ½å¤Ÿç”Ÿæ•ˆã€‚</p>
<h2 id="åŠ¨ç”»ç»‘å®š"><a href="#åŠ¨ç”»ç»‘å®š" class="headerlink" title="åŠ¨ç”»ç»‘å®š"></a>åŠ¨ç”»ç»‘å®š</h2><p>æˆ‘ä»¬å¯ä»¥å°†éšå¼åŠ¨ç”»ä¸­çš„å‚æ•°ä¸å…¶ä»–æ§ä»¶ç»‘å®šï¼Œæ¯”å¦‚å’Œæ­¥è¿›å™¨<code>stepper</code>ç»‘å®šï¼Œè¿™æ ·æ¯æ¬¡ç‚¹å‡»Stepperçš„æŒ‰é’®æ—¶å€™ï¼Œæ·»åŠ äº†åŠ¨ç”»çš„æŒ‰é’®ä¼šæ ¹æ®å˜åŒ–çš„å€¼å»è°ƒæ•´å½“å‰çŠ¶æ€ï¼Œè¿™ä¸ªè¿‡ç¨‹å°†ä¼šä»¥åŠ¨ç”»å½¢å¼å‘ˆç°ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(animationAmount)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Stepper</span>(<span class="string">&quot;Scale amount&quot;</span>, value: <span class="variable">$animationAmount</span>.animation(.easeOut(duration: <span class="number">1</span>)</span><br><span class="line">                .repeatCount(<span class="number">3</span>, autoreverses: <span class="literal">true</span>)), in: <span class="number">1</span><span class="operator">...</span><span class="number">10</span>, step: <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">            <span class="type">Spacer</span>()</span><br><span class="line"></span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">                animationAmount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            .padding(<span class="number">40</span>)</span><br><span class="line">            .background(.red)</span><br><span class="line">            .foregroundStyle(.white)</span><br><span class="line">            .clipShape(.circle)</span><br><span class="line">            .scaleEffect(animationAmount)</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºæ˜¾å¼åŠ¨ç”»"><a href="#åˆ›å»ºæ˜¾å¼åŠ¨ç”»" class="headerlink" title="åˆ›å»ºæ˜¾å¼åŠ¨ç”»"></a>åˆ›å»ºæ˜¾å¼åŠ¨ç”»</h2><p>æˆ‘ä»¬ç°åœ¨èƒ½å¤Ÿé€šè¿‡å°†<code>animation()</code>ä¿®é¥°ç¬¦é™„åŠ åˆ°è§†å›¾æ¥åˆ›å»ºéšå¼åŠ¨ç”»ï¼Œä»¥åŠå®ƒå¦‚ä½•è®©æˆ‘ä»¬é€šè¿‡å°†<code>animation()</code>ä¿®é¥°ç¬¦æ·»åŠ åˆ°ç»‘å®šæ¥åˆ›å»ºåŠ¨ç”»ç»‘å®šæ›´æ”¹ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡<code>withAnimation()</code>é—­åŒ…æ¥åˆ›å»ºæ˜¾å¼åŠ¨ç”»ã€‚</p>
<p>é¦–å…ˆè¿˜æ˜¯åˆ›å»ºä¸€ä¸ªç®€å•çš„æŒ‰é’®ï¼Œå¹¶ä¸ºä»–æ·»åŠ ä¸€ä¸ª3Dæ—‹è½¬çš„ä¿®é¥°ç¬¦<code>rotation3DEffect()</code>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// do nothing</span></span><br><span class="line">    &#125;</span><br><span class="line">    .padding(<span class="number">50</span>)</span><br><span class="line">    .background(.red)</span><br><span class="line">    .foregroundStyle(.white)</span><br><span class="line">    .clipShape(.circle)</span><br><span class="line">    .rotation3DEffect(.degrees(animationAmount), axis: (x: <span class="number">0</span>, y: <span class="number">1</span>, z: <span class="number">0</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ç°åœ¨å¸Œæœ›ç»™Buttonæ·»åŠ ä¸€ä¸ªåŠ¨ä½œï¼Œæ¥ä¿®æ”¹<code>animationAmount</code>è¿™ä¸ªå‚æ•°ã€‚å¦‚æœç›´æ¥ç¼–å†™<code>animationAmount += 360</code>ï¼Œé‚£ä¹ˆæ›´æ”¹å°†ç«‹å³å‘ç”Ÿï¼Œå› ä¸ºæŒ‰é’®æ²¡æœ‰é™„åŠ åŠ¨ç”»ä¿®æ”¹å™¨ã€‚è¿™å°±æ˜¯æ˜¾å¼åŠ¨ç”»çš„ç”¨æ­¦ä¹‹åœ°ï¼šå¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>withAnimation()</code>é—­åŒ…ï¼Œé‚£ä¹ˆ SwiftUI å°†ç¡®ä¿ç”±æ–°çŠ¶æ€å¼•èµ·çš„ä»»ä½•å˜åŒ–éƒ½å°†è‡ªåŠ¨è¿›è¡ŒåŠ¨ç”»å¤„ç†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">        withAnimation &#123;</span><br><span class="line">            animationAmount <span class="operator">+=</span> <span class="number">360</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//            withAnimation(.spring(duration: 2, bounce: 0.5)) &#123;</span></span><br><span class="line"><span class="comment">//                animationAmount += 360</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line">        <span class="comment">// do nothing</span></span><br><span class="line">    &#125;</span><br><span class="line">    .padding(<span class="number">50</span>)</span><br><span class="line">    .background(.red)</span><br><span class="line">    .foregroundStyle(.white)</span><br><span class="line">    .clipShape(.circle)</span><br><span class="line">    .rotation3DEffect(.degrees(animationAmount), axis: (x: <span class="number">1</span>, y: <span class="number">1</span>, z: <span class="number">1</span>))</span><br><span class="line">&#125;</span><br><span class="line">```withAnimation()å¯ä»¥ç»™ä¸€ä¸ªåŠ¨ç”»å‚æ•°ï¼Œä½¿ç”¨ä½ å¯ä»¥åœ¨ <span class="type">SwiftUI</span> çš„å…¶ä»–åœ°æ–¹ä½¿ç”¨çš„æ‰€æœ‰ç›¸åŒçš„åŠ¨ç”»<span class="operator">ã€‚</span>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨withAnimation()å¦‚ä¸‹è°ƒç”¨ä½¿æˆ‘ä»¬çš„æ—‹è½¬æ•ˆæœä½¿ç”¨å¼¹ç°§åŠ¨ç”»ï¼š</span><br><span class="line"></span><br><span class="line">```swift</span><br><span class="line">withAnimation(.interpolatingSpring(stiffness: <span class="number">5</span>, damping: <span class="number">1</span>)) &#123;</span><br><span class="line">    animationAmount <span class="operator">+=</span> <span class="number">360</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// or </span></span><br><span class="line">withAnimation(.spring(duration: <span class="number">1</span>, bounce: <span class="number">0.5</span>)) &#123;</span><br><span class="line">                animationAmount <span class="operator">+=</span> <span class="number">360</span></span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ§åˆ¶åŠ¨ç”»å †æ ˆ"><a href="#æ§åˆ¶åŠ¨ç”»å †æ ˆ" class="headerlink" title="æ§åˆ¶åŠ¨ç”»å †æ ˆ"></a>æ§åˆ¶åŠ¨ç”»å †æ ˆ</h2><p>æˆ‘ä»¬ä¹‹å‰ç ”ç©¶è¿‡ä¿®é¥°ç¬¦ä½ç½®ä»¥åŠé¡ºåºçš„é‡è¦æ€§ï¼Œæ¯”å¦‚ä¸‹é¢ä¸¤ç»„ä»£ç è¡¨ç°å‡ºæ¥çš„æ ·å¼å°±æ˜¯ä¸åŒçš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">// do nothing</span></span><br><span class="line">&#125;</span><br><span class="line">.background(.blue)</span><br><span class="line">.frame(width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line">.foregroundStyle(.white)</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">// do nothing</span></span><br><span class="line">&#125;</span><br><span class="line">.frame(width: <span class="number">200</span>, height: <span class="number">200</span>)    </span><br><span class="line">.background(.blue)</span><br><span class="line">.foregroundStyle(.white)</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯å› ä¸ºå¦‚æœæˆ‘ä»¬åœ¨è°ƒæ•´æ¡†æ¶ä¹‹å‰ç»™èƒŒæ™¯ç€è‰²ï¼Œé‚£ä¹ˆåªæœ‰åŸå§‹ç©ºé—´è¢«ç€è‰²ï¼Œè€Œä¸æ˜¯æ‰©å±•çš„ç©ºé—´ã€‚å¦‚æœä½ è¿˜è®°å¾—ï¼Œå…¶æ ¹æœ¬åŸå› æ˜¯ SwiftUI ä½¿ç”¨ä¿®é¥°ç¬¦åŒ…è£¹è§†å›¾çš„æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬å¤šæ¬¡åº”ç”¨ç›¸åŒçš„ä¿®é¥°ç¬¦â€”â€”æˆ‘ä»¬é‡å¤<code>background()</code>å’Œ<code>padding()</code>å¤šæ¬¡åˆ›å»ºæ¡çº¹è¾¹æ¡†æ•ˆæœã€‚ </p>
<p>è¿™å…¶å®å‘Šè¯‰æˆ‘ä»¬ï¼Œä¿®é¥°ç¬¦çš„é¡ºåºå¾ˆé‡è¦ï¼Œå› ä¸º SwiftUI æŒ‰ç…§ä¿®é¥°ç¬¦çš„åº”ç”¨é¡ºåºåŒ…è£…è§†å›¾ã€‚ </p>
<p>æˆ‘ä»¬ä¸ºæŒ‰é’®æ·»åŠ ä¸€äº›ä¿®é¥°å™¨ï¼Œè®©ä»–æ ¹æ®æŸäº›çŠ¶æ€æ˜¾ç¤ºä¸åŒçš„é¢œè‰²</p>
<p>è¿è¡Œä¸‹é¢ä»£ç ï¼Œä½ ä¼šçœ‹åˆ°ç‚¹å‡»æŒ‰é’®ä¼šä½¿å…¶é¢œè‰²åœ¨è“è‰²å’Œçº¢è‰²ä¹‹é—´å˜åŒ–ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯è¿ç»­çš„ï¼Œè€Œä¸æ˜¯ç”±çº¢è‰²ç›´æ¥åˆ‡æ¢åˆ°è“è‰²ã€‚ </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">    enabled.toggle()</span><br><span class="line">&#125;</span><br><span class="line">.frame(width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line">.background(enabled <span class="operator">?</span> .blue : .red)</span><br><span class="line">.animation(<span class="literal">nil</span>, value: enabled)</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸‹é¢ä»£ç ï¼Œä½ ä¼šçœ‹åˆ°ç‚¹å‡»æŒ‰é’®ä¼šä½¿å…¶é¢œè‰²åœ¨è“è‰²å’Œçº¢è‰²ä¹‹é—´å˜åŒ–çš„åŒæ—¶ï¼Œå½¢çŠ¶ä¹Ÿéšä¹‹å‘ç”Ÿæ”¹å˜ï¼Œå¹¶ä¸”è¢«æˆ‘ä»¬é™„åŠ äº†ä¸€ä¸ªè·³åŠ¨çš„ç‰¹æ•ˆã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> animationAmount <span class="operator">=</span> <span class="number">0.0</span></span><br><span class="line"><span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> enabled <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">        enabled.toggle()</span><br><span class="line">    &#125;</span><br><span class="line">    .frame(width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line">    .background(enabled <span class="operator">?</span> .blue : .red)</span><br><span class="line">    .animation(.default, value: enabled)</span><br><span class="line">    .foregroundStyle(.white)</span><br><span class="line">    .clipShape(.rect(cornerRadius: enabled <span class="operator">?</span> <span class="number">60</span> : <span class="number">0</span>))</span><br><span class="line">    .animation(.spring(duration: <span class="number">1</span>, bounce: <span class="number">0.6</span>), value: enabled)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä½ ä¼šçœ‹åˆ°ï¼Œå¦‚æœæˆ‘ä»¬åº”ç”¨å¤šä¸ªanimation()ä¿®æ”¹å™¨ï¼Œæ¯ä¸ªä¿®æ”¹å™¨éƒ½ä¼šæ§åˆ¶å®ƒä¹‹å‰çš„æ‰€æœ‰å†…å®¹ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªåŠ¨ç”»ã€‚è¿™å…è®¸æˆ‘ä»¬ä»¥å„ç§ä¸åŒçš„æ–¹å¼ä¸ºçŠ¶æ€å˜åŒ–è®¾ç½®åŠ¨ç”»ï¼Œè€Œä¸æ˜¯å¯¹æ‰€æœ‰å±æ€§éƒ½ä½¿ç”¨åŒä¸€ç§åŠ¨ç”»ã€‚</p>
<p>æ¯”å¦‚å¯¹äºä¸Šé¢çš„ä»£ç ï¼Œå¦‚æœä½ åªå¸Œæœ›å½¢çŠ¶ä¸Šçš„å˜åŒ–ä½¿ç”¨åŠ¨ç”»ï¼Œè€Œå¸Œæœ›é¢œè‰²ç›´æ¥å˜åŒ–ï¼Œå¯ä»¥æŠŠç¬¬ä¸€ä¸ª<code>.animation</code>ä¸­çš„<code>.deault</code>æ”¹ä¸º<code>nil</code>ï¼Œè¿™æ ·ï¼Œé¢œè‰²å˜åŒ–çš„åŠ¨ç”»å°±è¢«å®Œå…¨ç¦ç”¨æ‰äº†ï¼Œè€Œä¸‹ä¸€ä¸ªå½¢çŠ¶å˜åŒ–çš„åŠ¨ç”»ä¸å—å½±å“ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> animationAmount <span class="operator">=</span> <span class="number">0.0</span></span><br><span class="line"><span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> enabled <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">        enabled.toggle()</span><br><span class="line">    &#125;</span><br><span class="line">    .frame(width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line">    .background(enabled <span class="operator">?</span> .blue : .red)</span><br><span class="line">    .animation(<span class="literal">nil</span>, value: enabled)</span><br><span class="line">    .foregroundStyle(.white)</span><br><span class="line">    .clipShape(.rect(cornerRadius: enabled <span class="operator">?</span> <span class="number">60</span> : <span class="number">0</span>))</span><br><span class="line">    .animation(.spring(duration: <span class="number">1</span>, bounce: <span class="number">0.6</span>), value: enabled)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="åŠ¨ç”»æ‰‹åŠ¿"><a href="#åŠ¨ç”»æ‰‹åŠ¿" class="headerlink" title="åŠ¨ç”»æ‰‹åŠ¿"></a>åŠ¨ç”»æ‰‹åŠ¿</h2><p>SwiftUI å…è®¸æˆ‘ä»¬å°†æ‰‹åŠ¿é™„åŠ åˆ°ä»»ä½•è§†å›¾ï¼Œå¹¶ä¸”è¿™äº›æ‰‹åŠ¿çš„æ•ˆæœä¹Ÿå¯ä»¥æ˜¯åŠ¨ç”»çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç³»åˆ—æ‰‹åŠ¿ï¼Œä¾‹å¦‚ç‚¹å‡»æ‰‹åŠ¿è®©ä»»ä½•è§†å›¾å“åº”ç‚¹å‡»ï¼Œæ‹–åŠ¨æ‰‹åŠ¿å“åº”æˆ‘ä»¬åœ¨è§†å›¾ä¸Šæ‹–åŠ¨æ‰‹æŒ‡ï¼Œç­‰ç­‰ã€‚ </p>
<p>ç¨åæˆ‘ä»¬ä¼šæ›´è¯¦ç»†åœ°ç ”ç©¶æ‰‹åŠ¿ï¼Œä½†ç°åœ¨è®©æˆ‘ä»¬å°è¯•ä¸€äº›ç›¸å¯¹ç®€å•çš„äº‹æƒ…ï¼šä¸€å¼ æˆ‘ä»¬å¯ä»¥åœ¨å±å¹•ä¸Šæ‹–åŠ¨çš„å¡ç‰‡ï¼Œä½†å½“æˆ‘ä»¬æ”¾æ‰‹æ—¶å®ƒä¼šå¼¹å›åˆ°åŸæ¥çš„ä½ç½®ã€‚ </p>
<p>é¦–å…ˆåœ¨å±å¹•ä¸­å¤®ç»˜åˆ¶ä¸€ä¸ªç±»ä¼¼å¡ç‰‡çš„è§†å›¾ã€‚ </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">LinearGradient</span>(colors: [.yellow, .red], startPoint: .topLeading, endPoint: .bottomTrailing)</span><br><span class="line">            .frame(width: <span class="number">300</span>, height: <span class="number">200</span>)</span><br><span class="line">            .clipShape(.rect(cornerRadius: <span class="number">10</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æƒ³è¦æ ¹æ®æ‰‹æŒ‡çš„ä½ç½®åœ¨å±å¹•ä¸Šç§»åŠ¨å®ƒï¼Œéœ€è¦å­˜å‚¨æ‹–åŠ¨é‡ï¼Œå¹¶ç”¨<code>.offset()</code>ä¿®é¥°ç¬¦æ¥ç§»åŠ¨ï¼Œå®ƒè®©æˆ‘ä»¬å¯ä»¥è°ƒæ•´è§†å›¾çš„ X å’Œ Y åæ ‡ï¼Œè€Œæ— éœ€ç§»åŠ¨å®ƒå‘¨å›´çš„å…¶ä»–è§†å›¾ã€‚å¦‚æœæ„¿æ„ï¼Œä½ å¯ä»¥ä¼ å…¥ç¦»æ•£çš„ X å’Œ Y åæ ‡ï¼ŒÂ offset()ä¹Ÿå¯ä»¥ç›´æ¥é‡‡ç”¨CGSizeã€‚ </p>
<p>è¿™äº›åˆ›å»ºå®Œåï¼Œæˆ‘ä»¬å°±è¦åšæœ€é‡è¦çš„æ‰‹åŠ¿éƒ¨åˆ†äº†â€”â€”åˆ›å»ºä¸€ä¸ª<code>DragGesture</code>å¹¶å°†å…¶é™„åŠ åˆ°å¡ç‰‡ä¸Šã€‚æ‹–åŠ¨æ‰‹åŠ¿æœ‰ä¸¤ä¸ªå¯¹æˆ‘ä»¬æœ‰ç”¨çš„é¢å¤–ä¿®é¥°ç¬¦ï¼š<code>onChanged()</code>è®©æˆ‘ä»¬åœ¨ç”¨æˆ·ç§»åŠ¨æ‰‹æŒ‡æ—¶è¿è¡Œé—­åŒ…ï¼Œ<code>onEnded()</code>è®©æˆ‘ä»¬åœ¨ç”¨æˆ·å°†æ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶è¿è¡Œé—­åŒ…ï¼Œä»è€Œç»“æŸæ‹–åŠ¨ã€‚  </p>
<p>ç°åœ¨ï¼Œä½ çš„ä»£ç åº”è¯¥æ˜¯è¿™æ ·çš„,å¦‚æœä½¿ç”¨éšå¼è¡¨è¾¾ï¼Œåé¢éœ€è¦åŠ ä¸Š<code>.animation</code>çš„ä¿®é¥°ç¬¦ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> dragAmount <span class="operator">=</span> <span class="type">CGSize</span>.zero</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">LinearGradient</span>(colors: [.yellow, .red], startPoint: .topLeading, endPoint: .bottomTrailing)</span><br><span class="line">            .frame(width: <span class="number">300</span>, height: <span class="number">200</span>)</span><br><span class="line">            .clipShape(.rect(cornerRadius: <span class="number">10</span>))</span><br><span class="line">            .offset(dragAmount)</span><br><span class="line">            .gesture(</span><br><span class="line">                <span class="type">DragGesture</span>()</span><br><span class="line">                    .onChanged &#123; dragAmount <span class="operator">=</span> <span class="variable">$0</span>.translation &#125; <span class="comment">//æ‹–æ‹½çš„æ—¶å€™æ˜¯æ²¡æœ‰åŠ¨ç”»çš„</span></span><br><span class="line">                    .onEnded &#123; <span class="keyword">_</span> <span class="keyword">in</span></span><br><span class="line">                        withAnimation(.bouncy) &#123;</span><br><span class="line">                            dragAmount <span class="operator">=</span> .zero</span><br><span class="line">                        &#125;     <span class="comment">//åªæœ‰é‡Šæ”¾çš„æ—¶å€™æœ‰åŠ¨ç”»ï¼Œæ˜¾å¼åŠ¨ç”»</span></span><br><span class="line">                    &#125;</span><br><span class="line">            )</span><br><span class="line">            <span class="comment">//.animation(.bouncy, value: dragAmount)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯•ç€é¢„è§ˆä¸€ä¸‹ï¼Œçœ‹çœ‹æ•ˆæœå¦‚ä½•å§ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°†åç§»åŠ¨ç”»ä¸æ‹–åŠ¨æ‰‹åŠ¿å’Œä¸€ç‚¹å»¶è¿Ÿç›¸ç»“åˆï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºéå¸¸æœ‰è¶£çš„åŠ¨ç”»è€Œæ— éœ€å¤§é‡ä»£ç ã€‚ </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> letters <span class="operator">=</span> <span class="type">Array</span>(<span class="string">&quot;Hello SwiftUI&quot;</span>)</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> enabled <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> dragAmount <span class="operator">=</span> <span class="type">CGSize</span>.zero</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">HStack</span>(spacing: <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">ForEach</span>(<span class="number">0</span><span class="operator">..&lt;</span>letters.count, id: \.<span class="keyword">self</span>) &#123; num <span class="keyword">in</span></span><br><span class="line">                <span class="type">Text</span>(<span class="type">String</span>(letters[num]))</span><br><span class="line">                    .padding(<span class="number">5</span>)</span><br><span class="line">                    .font(.title)</span><br><span class="line">                    .background(enabled <span class="operator">?</span> .blue : .red)</span><br><span class="line">                    .offset(dragAmount)</span><br><span class="line">                    .animation(.linear.delay(<span class="type">Double</span>(num) <span class="operator">/</span> <span class="number">20</span>), value: dragAmount)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .gesture(</span><br><span class="line">            <span class="type">DragGesture</span>()</span><br><span class="line">                .onChanged &#123; dragAmount <span class="operator">=</span> <span class="variable">$0</span>.translation &#125;</span><br><span class="line">                .onEnded &#123; <span class="keyword">_</span> <span class="keyword">in</span></span><br><span class="line">                    dragAmount <span class="operator">=</span> .zero</span><br><span class="line">                    enabled.toggle()</span><br><span class="line">                &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‹–æ‹½çš„æ—¶å€™ï¼Œå­—æ¯ä¼šè·Ÿç€è½¨è¿¹è›‡å½¢æ¸¸åŠ¨ï¼Œå¹¶åœ¨é‡Šæ”¾çš„æ—¶å€™å˜æ¢é¢œè‰²ã€‚</p>
<h2 id="ä½¿ç”¨transitionsæ˜¾ç¤ºæˆ–éšè—è§†å›¾"><a href="#ä½¿ç”¨transitionsæ˜¾ç¤ºæˆ–éšè—è§†å›¾" class="headerlink" title="ä½¿ç”¨transitionsæ˜¾ç¤ºæˆ–éšè—è§†å›¾"></a>ä½¿ç”¨transitionsæ˜¾ç¤ºæˆ–éšè—è§†å›¾</h2><p>SwiftUI æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯èƒ½å¤Ÿè‡ªå®šä¹‰è§†å›¾æ˜¾ç¤ºå’Œéšè—çš„æ–¹å¼ã€‚ä¹‹å‰æ‚¨å·²ç»äº†è§£äº†æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨å¸¸è§„ifæ¡ä»¶æ¥æœ‰æ¡ä»¶åœ°åŒ…å«è§†å›¾ï¼Œè¿™æ„å‘³ç€å½“è¯¥æ¡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„è§†å›¾å±‚æ¬¡ç»“æ„ä¸­æ’å…¥æˆ–åˆ é™¤è§†å›¾ã€‚</p>
<p>Transitions æ§åˆ¶è¿™ç§æ’å…¥å’Œç§»é™¤æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„ transitionsï¼Œä»¥ä¸åŒçš„æ–¹å¼ç»„åˆå®ƒä»¬ï¼Œç”šè‡³åˆ›å»ºå®Œå…¨è‡ªå®šä¹‰çš„ transitionsã€‚ </p>
<p>æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªæŒ‰é’®å’Œä¸€ä¸ªçŸ©å½¢ï¼Œå¹¶è®©çŸ©å½¢åªæœ‰åœ¨æ»¡è¶³æŸä¸ªæ¡ä»¶æ—¶æ‰ä¼šå‡ºç°ï¼Œç„¶åç”¨æŒ‰é’®æ§åˆ¶å®ƒçš„å‡ºç°å’Œæ¶ˆå¤±ã€‚ </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> isShowingRed <span class="operator">=</span> <span class="literal">false</span>    <span class="comment">//å®šä¹‰çŸ©å½¢æ˜¯å¦å‡ºç°çš„çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Button</span>(<span class="string">&quot;Tap Me&quot;</span>) &#123;</span><br><span class="line">                <span class="comment">//isShowingRed.toggle()</span></span><br><span class="line">                withAnimation &#123;</span><br><span class="line">                    isShowingRed.toggle()      <span class="comment">//ä½¿ç”¨æŒ‰é’®åˆ‡æ¢çŸ©å½¢æ˜¾ç¤ºçŠ¶æ€</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// do nothing</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> isShowingRed &#123;        <span class="comment">//æ˜¾ç¤ºæ¡ä»¶</span></span><br><span class="line">                <span class="type">Rectangle</span>()</span><br><span class="line">                    .fill(.red)</span><br><span class="line">                    .frame(width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line">                    <span class="comment">//.transition(.scale)</span></span><br><span class="line">                    <span class="comment">//.transition(.asymmetric(insertion: .scale, removal: .opacity))</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨transitionå¯ä»¥é€šè¿‡ä¸åŒå‚æ•°æ¥æ§åˆ¶å˜æ¢çš„æ ·å¼ã€‚æˆ‘ä»¬å¯ä»¥è®©çŸ©å½¢æŒ‰æ¯”ä¾‹æ”¾å¤§å’Œç¼©å° ï¼Œä¹Ÿå¯ä»¥<br>å°è¯•å…¶ä»–ä¸€äº›è¿‡æ¸¡ã€‚ä¸€ä¸ªæœ‰ç”¨çš„æ˜¯<code>.asymmetric</code>ï¼Œå®ƒè®©æˆ‘ä»¬å¯ä»¥åœ¨æ˜¾ç¤ºè§†å›¾æ—¶ä½¿ç”¨ä¸€ç§è½¬æ¢ï¼Œè€Œåœ¨è§†å›¾æ¶ˆå¤±æ—¶ä½¿ç”¨å¦ä¸€ç§è½¬æ¢ ï¼ˆè§ä¸Šæ–¹ä»£ç æ³¨é‡Šéƒ¨åˆ†ï¼‰ã€‚</p>
<h2 id="ä½¿ç”¨ViewModifieræ„å»ºè‡ªå®šä¹‰è½¬æ¢"><a href="#ä½¿ç”¨ViewModifieræ„å»ºè‡ªå®šä¹‰è½¬æ¢" class="headerlink" title="ä½¿ç”¨ViewModifieræ„å»ºè‡ªå®šä¹‰è½¬æ¢"></a>ä½¿ç”¨ViewModifieræ„å»ºè‡ªå®šä¹‰è½¬æ¢</h2><p>ä¸º SwiftUI åˆ›å»ºå…¨æ–°çš„è¿‡æ¸¡æ˜¯å¯èƒ½çš„â€”â€”è€Œä¸”å®é™…ä¸Šéå¸¸å®¹æ˜“â€”â€”å…è®¸æˆ‘ä»¬ä½¿ç”¨å®Œå…¨è‡ªå®šä¹‰çš„åŠ¨ç”»æ·»åŠ å’Œåˆ é™¤è§†å›¾ã€‚</p>
<p>è¿™ä¸ªåŠŸèƒ½æ˜¯é€šè¿‡<code>.modifier</code>è½¬æ¢å®ç°çš„ï¼Œå®ƒæ¥å—æˆ‘ä»¬æƒ³è¦çš„ä»»ä½•è§†å›¾ä¿®é¥°ç¬¦ã€‚é—®é¢˜æ˜¯æˆ‘ä»¬éœ€è¦èƒ½å¤Ÿå®ä¾‹åŒ–ä¿®é¥°ç¬¦ï¼Œè¿™æ„å‘³ç€å®ƒéœ€è¦æ˜¯æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ã€‚</p>
<p>ä¸ºäº†å°è¯•è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªè§†å›¾ä¿®æ”¹å™¨ï¼Œè®©æˆ‘ä»¬æ¨¡ä»¿ Keynote ä¸­çš„ Pivot åŠ¨ç”»â€”â€”å®ƒä¼šå¯¼è‡´ä¸€å¼ æ–°å¹»ç¯ç‰‡ä»å…¶å·¦ä¸Šè§’å‘å†…æ—‹è½¬ã€‚åœ¨ SwiftUI ä¸­ï¼Œè¿™æ„å‘³ç€åˆ›å»ºä¸€ä¸ªè§†å›¾ä¿®æ”¹å™¨ï¼Œä½¿æˆ‘ä»¬çš„è§†å›¾ä»ä¸€ä¸ªè§’å‘å†…æ—‹è½¬ï¼Œè€Œä¸ä¼šè„±ç¦»å®ƒåº”è¯¥ä½äºçš„è¾¹ç•Œã€‚SwiftUI å®é™…ä¸Šä¸ºæˆ‘ä»¬æä¾›äº†ä¿®æ”¹å™¨æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š<code>rotationEffect()</code>è®©æˆ‘ä»¬åœ¨ 2D ç©ºé—´ä¸­æ—‹è½¬è§†å›¾, å’Œ<code>clipped()</code>åœæ­¢åœ¨å…¶çŸ©å½¢ç©ºé—´ä¹‹å¤–ç»˜åˆ¶è§†å›¾ã€‚</p>
<p><code>rotationEffect()</code>ç±»ä¼¼äº<code>rotation3DEffect()</code>ï¼Œåªæ˜¯å®ƒå§‹ç»ˆå›´ç»• Z è½´æ—‹è½¬ã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿè®©æˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶æ—‹è½¬çš„é”šç‚¹â€”â€”è§†å›¾çš„å“ªä¸€éƒ¨åˆ†åº”è¯¥å›ºå®šåœ¨é€‚å½“çš„ä½ç½®ä½œä¸ºæ—‹è½¬çš„ä¸­å¿ƒã€‚SwiftUI ä¸ºæˆ‘ä»¬æä¾›äº†UnitPointä¸€ç§ç”¨äºæ§åˆ¶é”šç‚¹çš„ç±»å‹ï¼Œå®ƒè®©æˆ‘ä»¬å¯ä»¥ä¸ºæ—‹è½¬æŒ‡å®šä¸€ä¸ªç²¾ç¡®çš„ X&#x2F;Y ç‚¹ï¼Œæˆ–è€…ä½¿ç”¨è®¸å¤šå†…ç½®é€‰é¡¹ä¸­çš„ä¸€ä¸ªâ€”â€”Â &#96;&#96;.topLeading<code>ã€</code>.bottomTrailing<code>ã€</code>.center&#96;ç­‰ç­‰ã€‚</p>
<p>è®©æˆ‘ä»¬é€šè¿‡åˆ›å»ºä¸€ä¸ªç»“æ„å°†æ‰€æœ‰è¿™äº›æ”¾å…¥ä»£ç ä¸­ï¼Œè¯¥CornerRotateModifierç»“æ„å…·æœ‰ä¸€ä¸ªé”šç‚¹æ¥æ§åˆ¶æ—‹è½¬åº”è¯¥å‘ç”Ÿçš„ä½ç½®ï¼Œä»¥åŠä¸€ä¸ªæ•°é‡æ¥æ§åˆ¶åº”è¯¥åº”ç”¨å¤šå°‘æ—‹è½¬ï¼š </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CornerRotateModifier</span>: <span class="title class_">ViewModifier</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> amount: <span class="type">Double</span></span><br><span class="line">    <span class="keyword">let</span> anchor: <span class="type">UnitPoint</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">body</span>(<span class="params">content</span>: <span class="type">Content</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        content</span><br><span class="line">            .rotationEffect(.degrees(amount), anchor: anchor)</span><br><span class="line">            .clipped()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ clipped()æ„å‘³ç€å½“è§†å›¾æ—‹è½¬æ—¶ï¼Œä½äºå…¶è‡ªç„¶çŸ©å½¢ä¹‹å¤–çš„éƒ¨åˆ†ä¸ä¼šè¢«ç»˜åˆ¶ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨.modifierè½¬æ¢æ¥å°è¯•ï¼Œä½†å®ƒæœ‰ç‚¹ç¬¨æ‹™ã€‚ä¸€ä¸ªæ›´å¥½çš„ä¸»æ„æ˜¯å°†å…¶åŒ…è£…åœ¨ AnyTransitionçš„æ‰©å±•åä¸­ï¼Œä½¿å…¶åœ¨å…¶é¡¶éƒ¨å‰è§’ä» -90 æ—‹è½¬åˆ° 0ï¼š </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">AnyTransition</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> pivot: <span class="type">AnyTransition</span> &#123;</span><br><span class="line">        .modifier(</span><br><span class="line">            active: <span class="type">CornerRotateModifier</span>(amount: <span class="operator">-</span><span class="number">90</span>, anchor: .topLeading),</span><br><span class="line">            identity: <span class="type">CornerRotateModifier</span>(amount: <span class="number">0</span>, anchor: .topLeading)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨onTapGesture()ä¿®æ”¹å™¨åœ¨å±å¹•ä¸Šåˆ›å»ºä¸€ä¸ªçº¢è‰²çŸ©å½¢æ¢è½´ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> isShowingRed <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span> &#123;</span><br><span class="line">            <span class="type">Rectangle</span>()</span><br><span class="line">                .fill(.blue)</span><br><span class="line">                .frame(width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> isShowingRed &#123;</span><br><span class="line">                <span class="type">Rectangle</span>()</span><br><span class="line">                    .fill(.red)</span><br><span class="line">                    .frame(width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line">                    .transition(.pivot)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .onTapGesture &#123;</span><br><span class="line">            withAnimation &#123;</span><br><span class="line">                isShowingRed.toggle()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



    </div>

    <footer class="post-footer">
        <div class="post-nav">
            
                <div class="post-nav-prev">
                    <span>ä¸Šä¸€ç¯‡</span>
                    <a href="/article/46793.html">ã€Hacking With Swiftã€‘project7_iExpense</a>
                </div>
            
            
                <div class="post-nav-next">
                    <span>ä¸‹ä¸€ç¯‡</span>
                    <a href="/article/41438.html">ã€Hacking With Swiftã€‘project5_WordScramble</a>
                </div>
            
        </div>
    </footer>

    
        <div class="post-comments">
            <h3 class="comments-title">è¯„è®º</h3>
            <div id="waline"></div>
        </div>
    
</article>


    <script type="module">
        import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';

        init({
            el: '#waline',
            serverURL: 'https://walinecomments.five2fire.top',
            dark: 'auto',
            lang: 'zh-CN',
            pageview: true,
            comment: true,
            emoji: ["https://unpkg.com/@waline/emojis@1.1.0/weibo","https://unpkg.com/@waline/emojis@1.1.0/bilibili"]
        });
    </script>
    <link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline.css" />



            </main>
        </div>
        
    </div>
    
<script src="/js/main.js"></script>

    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
</body>
</html>
